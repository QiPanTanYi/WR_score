{const e=this,{window:t}=e,n="auto",l="content",o="expose",a="page",s="runAt",i="scripts",r=e=>"function"==typeof e,{Boolean:c,Error:u,Object:d,Promise:p,chrome:m,performance:h}=e,{apply:g}=Reflect,f=g.call.bind({}.hasOwnProperty),v=d.call.bind(d.call),w=!m.app,b="#"+i,y=(m.runtime.getURL("/").slice(0,-1),m.runtime.getManifest());m.runtime.getURL(y.options_page),m.runtime.getURL(y.icons[16].replace("16.png","")),(()=>{var i,g,x,C={3263:(i,u,g)=>{"use strict";function x(e,t){if(null==e)return{};var n,l,o={},a=d.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(o[n]=e[n]);return o}g.d(u,{m:()=>ar}),g(2993);var C=g(3293),k=g(287),_=g(3057),S=g(4017),z=g(6522),D=(g(537),g(5517),g(2262)),U=g(8292);const $=(0,D.qj)({route:U.BC,scripts:[],removedScripts:[],importing:null,loading:!1,needRefresh:!1,storageSize:0,sync:[],title:null});var R=g(6252),E=g(2502);const V={class:"page-options"},I={key:0},j={class:"aside-content"},W=(0,R._)("img",{src:"/public/images/icon128.png"},null,-1),T=["textContent"],L=(0,R._)("hr",null,null,-1),O=["href","data-num-scripts","textContent"];var M=g(8250),A=g(9963);const Z={class:"tab-installed"},P={key:0},H={class:"flex"},N={key:0,class:"flex-auto"},B={class:"btn-ghost",tabindex:"0"},F=["textContent"],q=["textContent"],Y=["textContent"],K=["textContent"],J=["textContent"],G={class:"btn-ghost",tabindex:"0"},Q=["value"],X=["textContent","value"],ee={class:"mr-2c"},te=["placeholder"],ne=["textContent"],le=["textContent"],oe=["textContent"],ae=["textContent"],se={key:0,class:"hint mx-1 my-1 flex flex-col"},ie=["textContent"],re=["textContent"],ce=["textContent"],ue=["data-columns","data-show-order","data-table"];var de=g(1036),pe=g(5310),me=g(9772),he=g(7181),ge=g(8694),fe=g(6930),ve=g(2770);const we=".script",be="ontouchstart"in document,ye=be?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},xe=be&&d.assign(document.createElement("div"),{className:"dragging-noscroll"}),Ce=["scroll","mouseenter","mouseleave"],{addEventListener:ke,removeEventListener:_e}=EventTarget.prototype;let Se,ze,De,Ue,$e,Re,Ee,Ve,Ie,je,We,Te,Le,Oe,Me,Ae,Ze,Pe;function He(e,t,n){We=e,Te=t,v(n?ke:_e,We,ye.start,be?Ne:qe)}function Ne(e){lt(e)&&(Re=e,Ee=setTimeout(Be,500,"timer"),v(ke,document,ye.move,Be),v(ke,document,ye.end,Fe))}function Be(e){Fe(),"timer"===e&&(v(qe,je,Re),w&&Ge()&&(We.scrollTop+=1,We.scrollTop-=1))}function Fe(){clearTimeout(Ee),v(_e,document,ye.move,Be),v(_e,document,ye.end,Fe)}function qe(e){var t;if(!lt(e))return;e.cancelable&&e.preventDefault();const{clientX:n,clientY:l}=(null==(t=e.touches)?void 0:t[0])||e,o=je.getBoundingClientRect(),a=We.getBoundingClientRect();Se=je.cloneNode(!0),ze=v([].filter,We.children,e=>"none"!==e.style.display),Ue=ze.indexOf(je),$e=Ue,ze.splice(Ue,1),De=o.height,Ve=n-o.left,Ie=l-o.top,Le=a.top+50,Oe=a.bottom-50,Pe={},je.classList.add("dragging-placeholder"),Se.classList.add("dragging"),Se.style.transform=`translate(${o.left}px, ${o.top}px)`,Se.style.width=`${o.width}px`,We.appendChild(Se),be&&We.insertAdjacentElement("afterBegin",xe),v(ke,document,ye.move,Ye),v(ke,document,ye.end,Ke)}function Ye(e){var t;const{clientX:n,clientY:l,target:o}=(null==(t=e.touches)?void 0:t[0])||e;let a;const s=be?nt(n,l):null==o.closest?void 0:o.closest(we);if(s&&s!==je){const e=s.getBoundingClientRect(),t=l>e.top+e.height/2;a=je!==s[(t?"next":"previous")+"ElementSibling"],a&&(s.insertAdjacentElement(t?"afterEnd":"beforeBegin",je),Je(ze.indexOf(s)+t))}Se.style.transform=`translate(${n-Ve}px, ${l-Ie}px)`,(Qe(l)||a)&&(Pe={})}function Ke(){v(_e,document,ye.move,Ye),v(_e,document,ye.end,Ke),et(),Se.remove(),be&&xe.remove(),je.classList.remove("dragging-placeholder"),Te(Ue,$e)}function Je(e){const t=$e<e?De:-De,n=ze.slice(...$e<e?[$e,e]:[e,$e]);n.forEach(e=>{e.style.transition="none",e.style.transform=`translateY(${t}px)`}),setTimeout(()=>n.forEach(({style:e})=>{e.removeProperty("transition"),e.removeProperty("transform")})),$e=e}function Ge(){return We.scrollHeight>We.clientHeight}function Qe(e){const n=Ge()&&Math.min(1,Math.max(0,e-Oe,Le-e)/50);return!n&&Me&&et(),n&&!Me&&(Me=setInterval(Xe,16),Ce.forEach(e=>v(ke,t,e,tt,!0))),Ae=n&&(e>Oe?1:-1)*(1+20*n|0),Ze=h.now(),!!n}function Xe(){const e=h.now(),t=Ae*(e-Ze)/16;We.scrollTop+=t,Ze=e}function et(){Ce.forEach(e=>v(_e,t,e,tt,!0)),Me&&clearInterval(Me),Me=0}function tt(e){e.stopPropagation()}function nt(e,t){var n;const l=`${e}:${t}`;return Pe[l]||(Pe[l]=null==(n=document.elementFromPoint(e,t))?void 0:n.closest(we))}function lt(e){return je=e.target.closest(we),je}const ot=["tabIndex"],at={class:"script-icon hidden-xs"},st=["href","data-hotkey"],it=["src","data-no-icon"],rt={class:"script-name flex ml-1c"},ct=["textContent"],ut={class:"script-info flex ml-1c"},dt=["href","textContent","tabIndex"],pt=["textContent"],mt=["textContent"],ht={class:"script-buttons script-buttons-left"},gt=["href","data-hotkey","tabIndex"],ft=["data-hotkey","tabIndex"],vt=["data-hotkey","tabIndex"],wt=(0,R._)("span",{class:"sep"},null,-1),bt=["tabIndex"],yt=["href","tabIndex"],xt=["textContent","title"],Ct={class:"script-buttons script-buttons-right"},kt=["data-hotkey","tabIndex"],_t=["data-hotkey","tabIndex"],St={props:["script","visible","viewTable","focused","hotkeys","showHotkeys"],components:{Icon:fe.Z,Tooltip:he.Z},data(){return{canRender:this.visible}},computed:{showRecycle:()=>"recycleBin"===$.route.paths[0],canUpdate(){return(0,C.TZ)(this.script)},author(){const e=this.script.meta.author;if(!e)return;const t=e.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:t&&t[2],name:t?t[1]:e}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||(0,C.iQ)(this.script.meta,"description")},updatedAt(){const{props:e,config:t}=this.script,n={};let l;if(t.removed?({lastModified:l}=e):l=e.lastUpdated||e.lastModified,l){const e=new Date(l);n.show=(0,C.mr)(Date.now()-l),t.removed?n.title=this.i18n("labelRemovedAt",e.toLocaleString()):n.title=this.i18n("labelLastUpdatedAt",e.toLocaleString())}return n},tabIndex(){return this.focused?0:-1},url(){return`${this.script.config.removed?"#recycleBin":b}/${this.script.props.id}`},urls(){return{home:[(0,C.ag)("buttonHome"),(0,C.t$)(this.script)],question:[(0,C.ag)("buttonSupport"),(0,C.b7)(this.script)]}},nameProps(){return this.viewTable?{is:"a",href:this.url,tabIndex:this.tabIndex,draggable:!1}:{is:"span"}}},watch:{visible(e){e&&(this.canRender=!0)},focused(e,t){const{$el:n}=this;if(e&&!t&&n){const e=n.getBoundingClientRect(),t=n.parentNode.getBoundingClientRect();let l=0;e.bottom>t.bottom-8?l+=e.bottom-t.bottom+8:e.top<t.top+8&&(l-=t.top-e.top+8),(0,M.u7)(document.activeElement)||n.focus({preventScroll:!0}),this.$emit("scrollDelta",l)}}},methods:{onRemove(){this.$emit("remove",this.script)},onRestore(){this.$emit("restore",this.script)},onToggle(){this.$emit("toggle",this.script)},onUpdate(){this.$emit("update",this.script)},onFocus(){M.$J.setContext("scriptFocus",!0)},onBlur(){M.$J.setContext("scriptFocus",!1)},toggleTip(e){(0,M.xr)(e.target)}}};var zt=g(3744);const Dt=(0,zt.Z)(St,[["render",(e,t,n,l,o,a)=>{const s=(0,R.up)("icon"),i=(0,R.up)("tooltip");return(0,R.wg)(),(0,R.iD)("div",{class:(0,E.C_)(["script",{disabled:!n.script.config.enabled,removed:n.script.config.removed,error:n.script.error,focused:n.focused,hotkeys:n.focused&&n.showHotkeys}]),tabIndex:a.tabIndex,onFocus:t[5]||(t[5]=(...e)=>a.onFocus&&a.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>a.onBlur&&a.onBlur(...e))},[(0,R._)("div",at,[(0,R._)("a",{href:a.url,"data-hotkey":n.hotkeys.edit,"data-hotkey-table":"",tabIndex:"-1"},[(0,R._)("img",{src:n.script.safeIcon,"data-no-icon":n.script.noIcon},null,8,it)],8,st)]),(0,R._)("div",rt,[n.script.config.removed?(0,R.kq)("",!0):((0,R.wg)(),(0,R.iD)("span",{key:0,class:"script-order",textContent:(0,E.zw)(n.script.props.position)},null,8,ct)),((0,R.wg)(),(0,R.j4)((0,R.LL)(a.nameProps.is),(0,R.dG)({class:"ellipsis"},a.nameProps),{default:(0,R.w5)(()=>[(0,R.Uk)((0,E.zw)(n.script.$cache.name),1)]),_:1},16))]),(0,R._)("div",ut,[o.canRender?((0,R.wg)(),(0,R.iD)(R.HY,{key:0},[a.author?((0,R.wg)(),(0,R.j4)(i,{key:0,content:e.i18n("labelAuthor")+n.script.meta.author,class:"script-author ml-1c hidden-sm",align:"end"},{default:(0,R.w5)(()=>[(0,R.Wm)(s,{name:"author"}),a.author.email?((0,R.wg)(),(0,R.iD)("a",{key:0,class:"ellipsis",href:`mailto:${a.author.email}`,textContent:(0,E.zw)(a.author.name),tabIndex:a.tabIndex},null,8,dt)):((0,R.wg)(),(0,R.iD)("span",{key:1,class:"ellipsis",textContent:(0,E.zw)(a.author.name)},null,8,pt))]),_:1},8,["content"])):(0,R.kq)("",!0),(0,R._)("span",{class:"version ellipsis",textContent:(0,E.zw)(n.script.meta.version)},null,8,mt),n.script.config.removed?(0,R.kq)("",!0):((0,R.wg)(),(0,R.j4)(i,{key:1,class:"size hidden-sm",content:n.script.$cache.sizes,align:"end"},{default:(0,R.w5)(()=>[(0,R.Uk)((0,E.zw)(n.script.$cache.size),1)]),_:1},8,["content"])),(0,R.Wm)(i,{class:"updated hidden-sm ml-1c",content:a.updatedAt.title,align:"end"},{default:(0,R.w5)(()=>[(0,R.Uk)((0,E.zw)(a.updatedAt.show),1)]),_:1},8,["content"])],64)):(0,R.kq)("",!0)]),(0,R._)("div",ht,[o.canRender?((0,R.wg)(),(0,R.iD)(R.HY,{key:0},[(0,R.Wm)(i,{content:e.i18n("buttonEdit"),align:"start"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:"btn-ghost",href:a.url,"data-hotkey":n.hotkeys.edit,tabIndex:a.tabIndex},[(0,R.Wm)(s,{name:"code"})],8,gt)]),_:1},8,["content"]),n.script.config.removed?(0,R.kq)("",!0):((0,R.wg)(),(0,R.iD)(R.HY,{key:0},[(0,R.Wm)(i,{content:a.labelEnable,align:"start"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:"btn-ghost",onClick:t[0]||(t[0]=(...e)=>a.onToggle&&a.onToggle(...e)),"data-hotkey":n.hotkeys.toggle,tabIndex:a.tabIndex},[(0,R.Wm)(s,{name:"toggle-"+(n.script.config.enabled?"on":"off")},null,8,["name"])],8,ft)]),_:1},8,["content"]),(0,R.Wm)(i,{disabled:!a.canUpdate||n.script.checking,content:e.i18n("buttonCheckForUpdates"),align:"start"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:"btn-ghost",onClick:t[1]||(t[1]=(...e)=>a.onUpdate&&a.onUpdate(...e)),"data-hotkey":n.hotkeys.update,tabIndex:a.canUpdate?a.tabIndex:-1},[(0,R.Wm)(s,{name:"refresh"})],8,vt)]),_:1},8,["disabled","content"])],64)),wt,(0,R.Wm)(i,{disabled:!a.description,content:a.description,align:"start"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:"btn-ghost",tabIndex:a.description?a.tabIndex:-1,onClick:t[2]||(t[2]=(...e)=>a.toggleTip&&a.toggleTip(...e))},[(0,R.Wm)(s,{name:"info"})],8,bt)]),_:1},8,["disabled","content"]),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(a.urls,([e,t],n)=>((0,R.wg)(),(0,R.j4)(i,{key:n,disabled:!t,content:e,align:"start"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:"btn-ghost",target:"_blank",rel:"noopener noreferrer",href:t,tabIndex:t?a.tabIndex:-1},[(0,R.Wm)(s,{name:n},null,8,["name"])],8,yt)]),_:2},1032,["disabled","content"]))),128)),n.script.message?((0,R.wg)(),(0,R.iD)("div",{key:1,class:"script-message",textContent:(0,E.zw)(n.script.message),title:n.script.error},null,8,xt)):(0,R.kq)("",!0)],64)):(0,R.kq)("",!0)]),(0,R._)("div",Ct,[o.canRender?((0,R.wg)(),(0,R.iD)(R.HY,{key:0},[a.showRecycle||!n.script.config.removed?((0,R.wg)(),(0,R.j4)(i,{key:0,content:e.i18n("buttonRemove"),align:"end"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:(0,E.C_)(["btn-ghost",{"btn-danger":n.script.config.removed}]),onClick:t[3]||(t[3]=(...e)=>a.onRemove&&a.onRemove(...e)),"data-hotkey":n.hotkeys.remove,tabIndex:a.tabIndex},[(0,R.Wm)(s,{name:"trash"})],10,kt)]),_:1},8,["content"])):(0,R.kq)("",!0),n.script.config.removed?((0,R.wg)(),(0,R.j4)(i,{key:1,content:e.i18n("buttonRestore"),placement:"left"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:"btn-ghost",onClick:t[4]||(t[4]=(...e)=>a.onRestore&&a.onRestore(...e)),"data-hotkey":n.hotkeys.restore,tabIndex:a.tabIndex},[(0,R.Wm)(s,{name:"undo"})],8,_t)]),_:1},8,["content"])):(0,R.kq)("",!0)],64)):(0,R.kq)("",!0)])],42,ot)}]]),Ut=Dt,$t={class:"edit frame flex flex-col abs-full"},Rt={class:"edit-header flex mr-1c"},Et=["textContent","onClick"],Vt={class:"edit-name text-center ellipsis flex-1"},It=["textContent"],jt={class:"edit-hint text-right ellipsis"},Wt=["textContent"],Tt={class:"edit-buttons"},Lt=["textContent","disabled","title"],Ot=["textContent","disabled"],Mt=["textContent"],At={key:1,class:"errors my-1c"},Zt=["textContent"],Pt={class:"my-1"},Ht=["href","textContent"];var Nt=g(7462),Bt=g(1181),Ft=g(9727);const qt={class:"edit-settings",ref:"container"},Yt=["textContent"],Kt={class:"form-group condensed"},Jt=["disabled"],Gt=["textContent"],Qt=["textContent"],Xt=["value","disabled"],en=["textContent"],tn=["textContent"],nn=(0,R._)("td",null,[(0,R._)("code",null,"@run-at")],-1),ln=["textContent"],on=["disabled"],an=["textContent"],sn=(0,R._)("option",{value:"document-start"},"document-start",-1),rn=(0,R._)("option",{value:"document-body"},"document-body",-1),cn=(0,R._)("option",{value:"document-end"},"document-end",-1),un=(0,R._)("option",{value:"document-idle"},"document-idle",-1),dn=(0,R._)("td",null,[(0,R._)("code",null,[(0,R.Uk)("@"),(0,R._)("s",{style:{color:"var(--fill-6)"}},"no"),(0,R.Uk)("frames")])],-1),pn=["textContent"],mn=["disabled"],hn=["textContent"],gn=["textContent"],fn=["textContent"],vn=["textContent"],wn=["textContent"],bn=["onUpdate:modelValue","placeholder","disabled"],yn=["textContent"],xn=["textContent"],Cn=["textContent"],kn=["onUpdate:modelValue","disabled"],_n=["textContent"],Sn=["onUpdate:modelValue","rows","disabled"],zn=e=>{var t;return(null==(t=e.match(/^(.*?)(@[-a-z]+)(.*)/))?void 0:t.slice(1))||[e,"",""]},Dn={props:["active","settings","value","readOnly"],computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:e}=this;return{name:(0,pe._M)(e,"meta.name"),homepageURL:(0,C.t$)(e),updateURL:(0,pe._M)(e,"meta.updateURL")||(0,C.ag)("hintUseDownloadURL"),downloadURL:(0,pe._M)(e,"meta.downloadURL")||(0,pe._M)(e,"custom.lastInstallURL")}},textInputs:()=>[["name",(0,C.ag)("labelName")],["homepageURL",(0,C.ag)("labelHomepageURL")],["updateURL",(0,C.ag)("labelUpdateURL")],["downloadURL",(0,C.ag)("labelDownloadURL")]],textAreas:()=>[["include","origInclude",...zn((0,C.ag)("labelInclude"))],["match","origMatch",...zn((0,C.ag)("labelMatch"))],["exclude","origExclude",...zn((0,C.ag)("labelExclude"))],["excludeMatch","origExcludeMatch",...zn((0,C.ag)("labelExcludeMatch"))]]},watch:{active(e){e&&this.$refs.container.querySelector("input").focus()}}},Un=(0,zt.Z)(Dn,[["render",(e,t,n,l,o,a)=>((0,R.wg)(),(0,R.iD)("div",qt,[(0,R._)("h4",{textContent:(0,E.zw)(e.i18n("editLabelSettings"))},null,8,Yt),(0,R._)("div",Kt,[(0,R._)("label",null,[(0,R.wy)((0,R._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>a.config.shouldUpdate=e),disabled:n.readOnly},null,8,Jt),[[A.e8,a.config.shouldUpdate]]),(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelAllowUpdate"))},null,8,Gt)]),(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelNotifyThisUpdated"))},null,8,Qt),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)([[e.i18n("genericOn"),"1"],[e.i18n("genericOff"),"0"],[e.i18n("genericUseGlobal"),""]],([e,l])=>((0,R.wg)(),(0,R.iD)("label",{class:"ml-1",key:l},[(0,R.wy)((0,R._)("input",{type:"radio",value:l,"onUpdate:modelValue":t[1]||(t[1]=e=>a.config.notifyUpdates=e),disabled:n.readOnly},null,8,Xt),[[A.G2,a.config.notifyUpdates]]),(0,R.Uk)(),(0,R._)("span",{textContent:(0,E.zw)(e)},null,8,en)]))),128))]),(0,R._)("h4",{textContent:(0,E.zw)(e.i18n("editLabelMeta"))},null,8,tn),(0,R._)("table",null,[(0,R._)("tr",null,[nn,(0,R._)("td",null,[(0,R._)("p",{textContent:(0,E.zw)(e.i18n("labelRunAt"))},null,8,ln)]),(0,R._)("td",null,[(0,R.wy)((0,R._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.custom.runAt=e),disabled:n.readOnly},[(0,R._)("option",{value:"",textContent:(0,E.zw)(e.i18n("labelRunAtDefault"))},null,8,an),sn,rn,cn,un],8,on),[[A.bM,a.custom.runAt]])])]),(0,R._)("tr",null,[dn,(0,R._)("td",null,[(0,R._)("p",{textContent:(0,E.zw)(e.i18n("labelNoFrames"))},null,8,pn)]),(0,R._)("td",null,[(0,R.wy)((0,R._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.custom.noframes=e),disabled:n.readOnly},[(0,R._)("option",{value:"",textContent:(0,E.zw)(e.i18n("labelRunAtDefault"))},null,8,hn),(0,R._)("option",{value:"0",textContent:(0,E.zw)(e.i18n("genericOn"))},null,8,gn),(0,R._)("option",{value:"1",textContent:(0,E.zw)(e.i18n("genericOff"))},null,8,fn)],8,mn),[[A.bM,a.custom.noframes]])])]),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(a.textInputs,([e,t])=>((0,R.wg)(),(0,R.iD)("tr",{key:e},[(0,R._)("td",null,[(0,R._)("code",{textContent:(0,E.zw)(`@${e}`)},null,8,vn)]),(0,R._)("td",null,[(0,R._)("p",{textContent:(0,E.zw)(t)},null,8,wn)]),(0,R._)("td",null,[(0,R.wy)((0,R._)("input",{type:"text","onUpdate:modelValue":t=>a.custom[e]=t,placeholder:a.placeholders[e],disabled:n.readOnly},null,8,bn),[[A.nr,a.custom[e]]])])]))),128))]),(0,R._)("table",null,[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(a.textAreas,([t,l,o,s,i])=>((0,R.wg)(),(0,R.iD)("tr",{key:t},[(0,R._)("td",null,[(0,R._)("p",null,[(0,R._)("span",{textContent:(0,E.zw)(o)},null,8,yn),(0,R._)("code",{textContent:(0,E.zw)(s)},null,8,xn),(0,R._)("span",{textContent:(0,E.zw)(i)},null,8,Cn)]),(0,R._)("label",null,[(0,R.wy)((0,R._)("input",{type:"checkbox","onUpdate:modelValue":e=>a.custom[l]=e,disabled:n.readOnly},null,8,kn),[[A.e8,a.custom[l]]]),(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelKeepOriginal"))},null,8,_n)])]),(0,R._)("td",null,[(0,R.wy)((0,R._)("textarea",{"onUpdate:modelValue":e=>a.custom[t]=e,spellcheck:"false",rows:e.calcRows(a.custom[t]),disabled:n.readOnly},null,8,Sn),[[A.nr,a.custom[t]]])])]))),128))])],512))]]),$n=Un,Rn={class:"edit-values",ref:"container"},En={class:"mb-1"},Vn={key:1,class:"inline-block ml-2"},In=["disabled"],jn=["textContent"],Wn=["textContent"],Tn=["disabled"],Ln={class:"ml-2 mr-2c"},On=(0,R._)("kbd",null,"PageUp",-1),Mn=(0,R._)("kbd",null,"PageDown",-1),An=(0,R._)("kbd",null,"\u2191",-1),Zn=(0,R._)("kbd",null,"\u2193",-1),Pn=(0,R._)("kbd",null,"Tab",-1),Hn=(0,R._)("kbd",null,"Shift-Tab",-1),Nn=(0,R._)("kbd",null,"Enter",-1),Bn=(0,R._)("kbd",null,"Ctrl-Del",-1),Fn=["textContent"],qn=["onKeydown","onClick"],Yn={class:"ellipsis"},Kn=["textContent"],Jn=["textContent"],Gn=["textContent"],Qn=["onClick"],Xn=["textContent"],el=["onClick"],tl=["textContent"],nl=["textContent"],ll=["textContent"],ol=["textContent"],al={key:3,class:"edit-values-panel flex flex-col mb-1c"},sl={class:"control"},il=["textContent"],rl=["textContent","onClick","title","disabled"],cl=["textContent"],ul=["textContent"],dl=["readOnly"],pl=["textContent"];var ml=g(432);let hl;const gl={error:"",dirty:!1},fl=e=>e.length>1024?e.slice(0,1024):e,vl=e=>{try{return JSON.stringify(JSON.parse(e),null,"  ")}catch(t){return e}},wl=(e,t)=>{e.page=Math.max(1,Math.min(e.totalPages,e.page+t))},bl={condition:"!edit"},yl={props:["active","script","readOnly"],components:{Icon:fe.Z,VmCode:Bt.default},data:()=>({current:null,loading:!0,page:null,values:null,trash:null}),computed:{keys(){return d.keys(this.values||{}).sort()},totalPages(){return Math.ceil(this.keys.length/25)},pageKeys(){const e=25*(this.page-1);return this.keys.slice(e,e+25)}},mounted(){this.$refs.container.addEventListener("focusin",e=>{M.$J.setContext("edit","selectionEnd"in e.target)})},watch:{active(e){const t=this.script.props.id;var n,l;if(e?(null==(n=this.current?this.cm:hl)||n.focus(),(0,C.gj)("GetValueStore",t,void 0,this.sender={tab:{id:Math.random()-2},frameId:0}).then(e=>{const t=!this.values;this.setData(e)&&t&&this.keys.length&&this.autofocus(!0),this.loading=!1}),this.disposeList=[M.$J.register("pageup",()=>wl(this,-1),bl),M.$J.register("pagedown",()=>wl(this,1),bl)]):null==(l=this.disposeList)||l.forEach(e=>e()),e){const e=this.onStorageChanged,n=browser.extension.getBackgroundPage();this[ml.vy]=browser.runtime.connect({name:ml.vy+JSON.stringify({cfg:{value:t},id:null==n?void 0:n[ml.vy](e),tabId:this.sender.tab.id})}),n||this[ml.vy].onMessage.addListener(e)}else{var o;null==(o=this[ml.vy])||o.disconnect(),this[ml.vy]=null}},current(e,t){if(e)hl=document.activeElement,this.$nextTick(()=>{const n=this.$refs,l=n.value,{cm:o}=l;if(this.cm=o,t&&l.updateValue(e.value),e.isNew){const e=n.key;e.setSelectionRange(0,0),e.focus()}else o.setCursor(0,0),o.focus()});else if(t){var n;null==(n=hl)||n.focus()}},page(){hl=null,this.autofocus()}},methods:{autofocus(e){this.$nextTick(()=>{this.$refs.editAll[e?"click":"focus"]()})},getLength(e,t){const n=e.length+(this.values[e]||t).length-1;return n<1e4?n:(0,C.aj)(n)},getValue(e,t,n){let l=this.values[e]||n;const o=l[0];return l=l.slice(1),"s"===o?l=JSON.stringify(l):t||(l=vl(l)),t?fl(l):l},getValueAll(){return`{\n  ${this.keys.map(e=>`${JSON.stringify(e)}: ${this.getValue(e)}`).join(",\n").replace(/\n/g,"\n  ")}\n}`},setData(e={}){if(!(0,pe.vZ)(this.values,e))return this.values=e,this.page=Math.min(this.page,this.totalPages)||1,this.calcSize(),!0},calcSize(){$.storageSize=this.keys.reduce((e,t)=>e+t.length+4+this.values[t].length+2,2)},updateValue({key:e,jsonValue:t,rawValue:n=(0,C.bd)(t)||""}){const{id:l}=this.script.props;return(0,C.gj)("UpdateValue",{id:l,key:e,raw:n},void 0,this.sender).then(()=>{n?this.values[e]=n:delete this.values[e],this.calcSize()})},onNew(){this.current=(0,Nt.Z)({isNew:!0,key:"",value:""},gl)},async onRemove(e){var t;this.updateValue({key:e}),(this.trash||(this.trash={}))[e+Math.random()]={key:e,rawValue:this.values[e],cut:this.getValue(e,!0),len:this.getLength(e)},(null==(t=this.current)?void 0:t.key)===e&&(this.current=null)},onRestore(e){const{trash:t}=this,{key:n,rawValue:l}=t[e];delete t[e],(0,C.xb)(t)&&(this.trash=null),this.updateValue({key:n,rawValue:l})},onEdit(e){this.current=(0,Nt.Z)({key:e,value:this.getValue(e)},gl)},onEditAll(){this.current=(0,Nt.Z)({isAll:!0,value:this.getValueAll()},gl)},async onSave(e){const{cm:t,current:n}=this;if(n.jsonPaused&&(n.jsonPaused=!1,this.onChange()),n.error){const e=n.errorPos;return t.setSelection(e,{line:e.line,ch:e.ch+1}),t.focus(),void(0,z.PV)({text:n.error})}1===e?(t.markClean(),n.dirty=!1):this.current=null,n.isAll?await(0,C.gj)("SetValueStores",{[this.script.props.id]:v(pe.Xw,n.jsonValue,e=>(0,C.bd)(e)||"")}):await this.updateValue(n)},onCancel(){const e=this.current;if(e.dirty){const t=`${e.key} ${1e9*Math.random()|0}`,n=this.cm.getValue(),l=(0,C.bd)(n);(this.trash||(this.trash={}))[t]={key:t,rawValue:l,cut:fl(n),len:this.getLength(t,l)}}this.current=null},onChange(e){const{current:t}=this;if(t.dirty=e,t.error=null,t.jsonPaused)return;const{cm:n}=this,l=h.now();try{const e=n.getValue();t.jsonValue=e.trim()?JSON.parse(e):void 0}catch(e){const l=/(position\s+)(\d+)|$/,o=n.posFromIndex(+`${e}`.match(l)[2]||0);t.error=`${e}`.replace(l,`$1${o.line+1}:${o.ch+1}`),t.errorPos=o,t.jsonValue=void 0}t.jsonPaused=h.now()-l>10},onStorageChanged(e){const t=d.values(e)[0].newValue;if(t){const{current:e}=this,n=null==e?void 0:e.key,l=e&&(e.isAll?this.getValueAll:this.getValue);if(this.setData(t instanceof d?t:(0,pe.p$)(t)),e){const t=l(n);this.cm.getValue()===t?(e.isNew=!1,e.dirty=!1):e.dirty||(e.value=t,this.onChange())}}else this.setData(t)},onUpDown(e){(0,M.nk)(("ArrowDown"===e.key?1:e.target!==this.$refs.editAll&&-1)||0)}}},xl=(0,zt.Z)(yl,[["render",(e,t)=>{const n=(0,R.up)("icon"),l=(0,R.up)("vm-code");return(0,R.wg)(),(0,R.iD)("div",Rn,[(0,R._)("div",En,[e.readOnly?(0,R.kq)("",!0):((0,R.wg)(),(0,R.iD)("button",{key:0,onClick:t[0]||(t[0]=(...t)=>e.onNew&&e.onNew(...t))},"+")),e.totalPages>1?((0,R.wg)(),(0,R.iD)("div",Vn,[(0,R._)("button",{disabled:1===e.page,onClick:t[1]||(t[1]=t=>e.page-=1)},"\u2190",8,In),(0,R._)("span",{class:"ml-1",textContent:(0,E.zw)(e.page)},null,8,jn),(0,R.Uk)(" / "),(0,R._)("span",{class:"mr-1",textContent:(0,E.zw)(e.totalPages)},null,8,Wn),(0,R._)("button",{disabled:e.page>=e.totalPages,onClick:t[2]||(t[2]=t=>e.page+=1)},"\u2192",8,Tn)])):(0,R.kq)("",!0),(0,R._)("span",Ln,[(0,R._)("span",null,[e.totalPages>1?((0,R.wg)(),(0,R.iD)(R.HY,{key:0},[On,(0,R.Uk)(", "),Mn,(0,R.Uk)(", ")],64)):(0,R.kq)("",!0),An,(0,R.Uk)(", "),Zn,(0,R.Uk)(", "),Pn,(0,R.Uk)(", "),Hn,(0,R.Uk)(", ")]),(0,R._)("span",null,[Nn,(0,R.Uk)(": "+(0,E.zw)(e.i18n("buttonEdit"))+",",1)]),(0,R._)("span",null,[Bn,(0,R.Uk)(": "+(0,E.zw)(e.i18n("buttonRemove")),1)])])]),(0,R._)("div",{class:"edit-values-table main",onKeydown:[t[4]||(t[4]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[5]||(t[5]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[(0,R._)("a",{ref:"editAll",class:"edit-values-row flex",onClick:t[3]||(t[3]=(...t)=>e.onEditAll&&e.onEditAll(...t)),tabindex:"0",textContent:(0,E.zw)(e.i18n("editValueAllHint"))},null,8,Fn),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.pageKeys,t=>((0,R.wg)(),(0,R.iD)("div",{key:t,class:"edit-values-row flex",onKeydown:(0,A.D2)((0,A.iM)(n=>e.onRemove(t),["ctrl","exact"]),["delete"]),onClick:n=>e.onEdit(t)},[(0,R._)("div",Yn,[(0,R._)("a",{textContent:(0,E.zw)(t),tabindex:"0"},null,8,Kn)]),(0,R._)("div",{class:"ellipsis flex-auto",textContent:(0,E.zw)(e.getValue(t,!0))},null,8,Jn),(0,R._)("pre",{textContent:(0,E.zw)(e.getLength(t))},null,8,Gn),(0,R._)("div",{class:"del",onClick:(0,A.iM)(n=>e.onRemove(t),["stop"])},[(0,R.Wm)(n,{name:"trash"})],8,Qn)],40,qn))),128))],32),e.trash?((0,R.wg)(),(0,R.iD)("h3",{key:0,textContent:(0,E.zw)(e.i18n("headerRecycleBin"))},null,8,Xn)):(0,R.kq)("",!0),e.trash?((0,R.wg)(),(0,R.iD)("div",{key:1,class:"edit-values-table trash",onKeydown:[t[6]||(t[6]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[7]||(t[7]=(0,A.D2)((0,A.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.trash,({key:t,cut:n,len:l},o)=>((0,R.wg)(),(0,R.iD)("div",{key:o,class:"edit-values-row flex",onClick:t=>e.onRestore(o)},[(0,R._)("a",{class:"ellipsis",textContent:(0,E.zw)(t),tabindex:"0"},null,8,tl),(0,R._)("s",{class:"ellipsis flex-auto",textContent:(0,E.zw)(n)},null,8,nl),(0,R._)("pre",{textContent:(0,E.zw)(l)},null,8,ll)],8,el))),128))],32)):(0,R.kq)("",!0),e.loading||e.keys.length?(0,R.kq)("",!0):((0,R.wg)(),(0,R.iD)("div",{key:2,class:"edit-values-empty mt-1",textContent:(0,E.zw)(e.i18n("noValues"))},null,8,ol)),e.current?((0,R.wg)(),(0,R.iD)("div",al,[(0,R._)("div",sl,[(0,R._)("h4",{textContent:(0,E.zw)(e.current.isAll?e.i18n("labelEditValueAll"):e.i18n("labelEditValue"))},null,8,il),(0,R._)("div",null,[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)([e.i18n("buttonOK"),e.i18n("buttonApply")],(t,n)=>((0,R.wg)(),(0,R.iD)("button",{key:t,textContent:(0,E.zw)(t),onClick:t=>e.onSave(n),class:(0,E.C_)({"has-error":e.current.error,"save-beacon":!n}),title:e.current.error,disabled:e.current.error||!e.current.dirty},null,10,rl))),128)),(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonCancel")),onClick:t[8]||(t[8]=(...t)=>e.onCancel&&e.onCancel(...t))},null,8,cl)])]),(0,R.wy)((0,R._)("label",null,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("valueLabelKey"))},null,8,ul),(0,R.wy)((0,R._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.current.key=t),readOnly:!e.current.isNew||e.readOnly,ref:"key",spellcheck:"false",onKeydown:t[10]||(t[10]=(0,A.D2)((0,A.iM)((...t)=>e.onCancel&&e.onCancel(...t),["exact","stop"]),["esc"]))},null,40,dl),[[A.nr,e.current.key]])],512),[[A.F8,!e.current.isAll]]),(0,R._)("label",null,[(0,R._)("span",{textContent:(0,E.zw)(e.current.isAll?e.i18n("valueLabelValueAll"):e.i18n("valueLabelValue"))},null,8,pl),(0,R.Wm)(l,{value:e.current.value,ref:"value",class:"h-100 mt-1",mode:"application/json",readOnly:e.readOnly,onCodeDirty:e.onChange,commands:{close:e.onCancel,save:e.onSave}},null,8,["value","readOnly","onCodeDirty","commands"])])])):(0,R.kq)("",!0)],512)}]]),Cl={class:"edit-help mb-2c"},kl=["innerHTML"],_l=(0,R._)("a",{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"},"violentmonkey.github.io/api/",-1),Sl={class:"keyboard"},zl=["textContent"],Dl=["textContent"],Ul=["textContent"],$l={props:["hotkeys"]},Rl=(0,zt.Z)($l,[["render",(e,t,n,l,o,a)=>((0,R.wg)(),(0,R.iD)("div",Cl,[(0,R._)("div",null,[(0,R._)("h3",{innerHTML:e.i18n("editHelpDocumention")},null,8,kl),_l]),(0,R._)("div",Sl,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("editHelpKeyboard"))},null,8,zl),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(n.hotkeys,([e,t])=>((0,R.wg)(),(0,R.iD)("dl",{key:e},[(0,R._)("dt",{class:"monospace-font",textContent:(0,E.zw)(e)},null,8,Dl),(0,R._)("dd",{textContent:(0,E.zw)(t)},null,8,Ul)]))),128))])]))]]),El={name:"",[s]:"",homepageURL:"",updateURL:"",downloadURL:"",origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},Vl=["include","match","exclude","excludeMatch"],Il=e=>e?`${e.join("\n")}${e.length?"\n":""}`:"",jl=e=>e.split("\n").map(e=>e.trim()).filter(c);let Wl,Tl;const Ll=async e=>{S.Z.get("editorWindow")&&(e||(e=await(null==C.oy?void 0:C.oy.getCurrent())||{}),"normal"===e.state&&S.Z.set("editorWindowPos",(0,pe.zr)(e,["left","top","width","height"])))},Ol=({id:e,tabs:n})=>{if(1===n.length){const{onBoundsChanged:n}=m.windows;n?n.addListener(t=>{t.id===e&&Ll(t)}):(t.addEventListener("resize",(0,C.Ds)(Ll,100)),Tl=!0)}};let Ml;const Al=(e,t)=>e<t?-1:e>t,Zl={props:["initial","initialCode","readOnly"],components:{VmCode:Bt.default,VmSettings:$n,VmValues:xl,VmExternals:Ft.Z,VmHelp:Rl},data(){return{nav:"code",canSave:!1,script:null,code:"",codeDirty:!1,settings:{},commands:{save:this.save,close:this.close,showHelp:()=>{this.nav="help"}},hotkeys:null,errors:null,urlMatching:"https://violentmonkey.github.io/api/matching/"}},computed:{navItems(){const{meta:e,props:t}=this.script||{},n=(null==e?void 0:e.require.length)&&"@require",l=!(0,C.xb)(null==e?void 0:e.resources)&&"@resource",o=$.storageSize;return(0,Nt.Z)({code:(0,C.ag)("editNavCode"),settings:(0,C.ag)("editNavSettings")},(null==t?void 0:t.id)&&{values:(0,C.ag)("editNavValues")+(o?` (${(0,C.aj)(o)})`:"")},(n||l)&&{externals:v(C.Hv,[n,l],"/")},{help:"?"})},scriptName(){const{script:e}=this,t=(null==e?void 0:e.meta)&&(0,C.pV)(e);return $.title=t,t}},watch:{nav(e){M.$J.setContext("tabCode","code"===e),"code"===e&&this.$nextTick(()=>{this.$refs.code.cm.focus()})},canSave(e){this.toggleUnloadSentry(e),M.$J.setContext("canSave",e)},"initial.error"(e){e&&(0,z.PV)({text:`${this.initial.message}\n\n${e}`})}},created(){var t;this.script=this.initial,this.toggleUnloadSentry=(0,U.Q$)(null,()=>{this.$refs.code.cm.focus()}),S.Z.get("editorWindow")&&1===e.history.length&&(null==(t=browser.windows)||t.getCurrent({populate:!0}).then(Ol))},async mounted(){var e;document.body.classList.add("edit-open"),$.storageSize=0,this.nav="code";const{custom:t,config:n}=this.script,{noframes:l}=t;this.settings={config:{notifyUpdates:`${null!=(e=n.notifyUpdates)?e:""}`,shouldUpdate:c(n.shouldUpdate)},custom:(0,Nt.Z)({},El,(0,pe.zr)(t,d.keys(El)),(0,pe.zr)(t,Vl,Il),{[s]:t[s]||"",noframes:null==l?"":+l})},Wl=(0,pe.p$)(this.settings),this.$watch("codeDirty",this.onChange),this.$watch("settings",this.onChange,{deep:!0});{var o;const e=d.values(this.navItems),t=[["Alt-PageUp",` ${e.join(" < ")}`],["Alt-PageDown",` ${e.join(" > ")}`],...d.entries(this.$refs.code.expandKeyMap()).sort((e,t)=>Al(e[1],t[1])||Al(e[0],t[0]))];Ml=null==(o=t.find(([,e])=>"save"===e))?void 0:o[0],Ml||(Ml="Ctrl-S",t.unshift([Ml,"save"])),this.hotkeys=t}this.disposeList=[M.$J.register("a-pageup",this.switchPrevPanel),M.$J.register("a-pagedown",this.switchNextPanel),M.$J.register(Ml.replace(/(?:Ctrl|Cmd)-/i,"ctrlcmd-"),this.save),M.$J.register("escape",()=>{this.nav="code"},{condition:"!tabCode"})],this.code=this.initialCode},methods:{async save(){if(!this.canSave)return;Tl&&Ll();const{settings:e}=this,{config:t,custom:n}=e,{notifyUpdates:l}=t,{noframes:o}=n;try{var a,s,i;const r=this.$refs.code,c=null==(a=this.script)||null==(s=a.props)?void 0:s.id,u=await(0,C.gj)("ParseScript",{id:c,code:r.getRealContent(),config:(0,Nt.Z)({},t,{notifyUpdates:l?+l:null}),custom:(0,Nt.Z)({},(0,pe.zr)(n,d.keys(El)),(0,pe.zr)(n,Vl,jl),{noframes:o?+o:null}),isNew:!c,message:""}),p=null==u||null==(i=u.where)?void 0:i.id;Wl=(0,pe.p$)(e),r.cm.markClean(),this.codeDirty=!1,this.canSave=!1,this.errors=u.errors,p&&(this.script=u.update,c||history.replaceState(null,this.scriptName,`${b}/${p}`))}catch(e){(0,z.GW)(`${e.message||e}`,{cancel:!1})}},close(e){var t;e&&"code"!==this.nav?this.nav="code":(this.$emit("close"),w&&(null==(t=document.activeElement)||t.blur()))},saveClose(){this.save().then(this.close)},switchPanel(e){const t=d.keys(this.navItems);this.nav=t[(t.indexOf(this.nav)+e+t.length)%t.length]},switchPrevPanel(){this.switchPanel(-1)},switchNextPanel(){this.switchPanel(1)},onChange(){this.canSave=this.codeDirty||!(0,pe.vZ)(this.settings,Wl)}},beforeUnmount(){var e;document.body.classList.remove("edit-open"),$.title=null,this.toggleUnloadSentry(!1),null==(e=this.disposeList)||e.forEach(e=>{e()})}},Pl=(0,zt.Z)(Zl,[["render",(e,t)=>{var n,l;const o=(0,R.up)("vm-code"),a=(0,R.up)("vm-settings"),s=(0,R.up)("vm-values"),i=(0,R.up)("vm-externals"),r=(0,R.up)("vm-help");return(0,R.wg)(),(0,R.iD)("div",$t,[(0,R._)("div",Rt,[(0,R._)("nav",null,[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.navItems,(t,n)=>((0,R.wg)(),(0,R.iD)("div",{key:n,class:(0,E.C_)(["edit-nav-item",{active:e.nav===n}]),textContent:(0,E.zw)(t),onClick:t=>e.nav=n},null,10,Et))),128))]),(0,R._)("div",Vt,[null!=(n=e.script)&&null!=(l=n.config)&&l.removed?((0,R.wg)(),(0,R.iD)("span",{key:0,class:"subtle",textContent:(0,E.zw)(e.i18n("headerRecycleBin")+" / ")},null,8,It)):(0,R.kq)("",!0),(0,R.Uk)(" "+(0,E.zw)(e.scriptName),1)]),(0,R._)("div",jt,[(0,R._)("a",{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("editHowToHint"))},null,8,Wt)]),(0,R._)("div",Tt,[(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonSave")),onClick:t[0]||(t[0]=(...t)=>e.save&&e.save(...t)),disabled:!e.canSave,class:(0,E.C_)({"has-error":e.errors}),title:e.errors},null,10,Lt),(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonSaveClose")),onClick:t[1]||(t[1]=(...t)=>e.saveClose&&e.saveClose(...t)),disabled:!e.canSave},null,8,Ot),(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonClose")),onClick:t[2]||(t[2]=(...t)=>e.close&&e.close(...t))},null,8,Mt)])]),(0,R.wy)((0,R.Wm)(o,{class:"flex-auto",value:e.code,readOnly:e.readOnly,ref:"code",active:"code"===e.nav,commands:e.commands,onCodeDirty:t[3]||(t[3]=t=>e.codeDirty=t)},null,8,["value","readOnly","active","commands"]),[[A.F8,"code"===e.nav]]),(0,R.wy)((0,R.Wm)(a,{class:"edit-body",readOnly:e.readOnly,active:"settings"===e.nav,settings:e.settings,value:e.script},null,8,["readOnly","active","settings","value"]),[[A.F8,"settings"===e.nav]]),(0,R.wy)((0,R.Wm)(s,{class:"edit-body",readOnly:e.readOnly,active:"values"===e.nav,script:e.script},null,8,["readOnly","active","script"]),[[A.F8,"values"===e.nav]]),"externals"===e.nav?((0,R.wg)(),(0,R.j4)(i,{key:0,class:"flex-auto",value:e.script},null,8,["value"])):(0,R.kq)("",!0),(0,R.wy)((0,R.Wm)(r,{class:"edit-body",hotkeys:e.hotkeys},null,8,["hotkeys"]),[[A.F8,"help"===e.nav]]),e.errors?((0,R.wg)(),(0,R.iD)("div",At,[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.errors,e=>((0,R.wg)(),(0,R.iD)("p",{key:e,textContent:(0,E.zw)(e),class:"text-red"},null,8,Zt))),128)),(0,R._)("p",Pt,[(0,R._)("a",{href:e.urlMatching,target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.urlMatching)},null,8,Ht)])])):(0,R.kq)("",!0)])}]]),Hl={sort:{exec:{title:(0,C.ag)("filterExecutionOrder")},alpha:{title:(0,C.ag)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:e}},{$cache:{lowerName:t}})=>e<t?-1:e>t},update:{title:(0,C.ag)("filterLastUpdateOrder"),compare:({props:{lastUpdated:e}},{props:{lastUpdated:t}})=>(+t||0)-(+e||0)},size:{title:(0,C.ag)("filterSize"),compare:(e,t)=>t.$cache.sizeNum-e.$cache.sizeNum}}},Nl=(0,D.qj)({searchScope:null,showEnabledFirst:null,showOrder:null,viewSingleColumn:null,viewTable:null,sort:null});v(pe.SE,Nl,e=>{(0,de.Z)(`filters.${e}`,t=>{Nl[e]=t,"sort"!==e||Hl.sort[t]||(Nl[e]=d.keys(Hl.sort)[0])})});const Bl="tabScripts",Fl="tabScripts && !inputFocus",ql=`${Fl} && selectedScript && !showRecycle`,Yl=`${Fl} && selectedScript && showRecycle`,Kl=`${Fl} && !buttonFocus`,Jl=`${Fl} && selectedScript && showHotkeys`,Gl={edit:"e",toggle:"space",update:"r",restore:"r",remove:"x"},Ql=(e,t)=>t.map(([t,n,l])=>M.$J.register(t,e,{condition:n,caseSensitive:l}));let Xl=0,eo=[],to=[];const no=(0,D.iH)(),lo=(0,D.iH)(),oo=(0,D.qj)({focusedIndex:-1,menuNewActive:!1,showHotkeys:!1,canRenderScripts:!$.route.paths[1],search:"",searchError:null,sortedScripts:[],filteredScripts:[],script:null,code:"",numColumns:0,batchRender:{limit:Xl}}),ao=(0,R.Fl)(()=>"recycleBin"===$.route.paths[0]),so=(0,R.Fl)(()=>!ao.value&&"exec"===Nl.sort),io=(0,R.Fl)(()=>{var e;return null==(e=Hl.sort[Nl.sort])?void 0:e.compare}),ro=(0,R.Fl)(()=>oo.filteredScripts[oo.focusedIndex]),co=(0,R.Fl)(()=>$.loading||(oo.search?oo.sortedScripts.find(e=>!1!==e.$cache.show):oo.sortedScripts.length)?null:(0,C.ag)("labelNoSearchScripts")),uo=(0,R.Fl)(()=>oo.search&&["code","all"].includes(Nl.searchScope)&&$.scripts.filter(e=>null==e.$cache.code).map(e=>e.props.id)),po=(0,C.Ds)(fo,100),mo=(0,C.Ds)(So);function ho(){!ao.value&&$.needRefresh&&($.scripts=$.scripts.filter(e=>!e.config.removed),$.needRefresh=!1),oo.focusedIndex=-1,fo()}async function go(){const e=uo.value;null!=e&&e.length&&await Uo(e),fo(),_o()}function fo(){const e=[...ao.value?$.removedScripts:$.scripts],t=oo.search?zo(e):e.length,n=io.value;var l;n&&e.sort((l=n,Nl.showEnabledFirst?(e,t)=>t.config.enabled-e.config.enabled||l(e,t):l)),oo.sortedScripts=e,oo.filteredScripts=oo.search?e.filter(({$cache:e})=>e.show):e,Eo(oo.focusedIndex),!Xl||t<Xl?So():mo()}function vo(){(0,C.gj)("CheckUpdate")}async function wo(){try{var e;let t=await(0,z.GW)((0,C.ag)("hintInputURL"),{input:"",ok:{type:"submit"}});t=null==(e=t)?void 0:e.trim(),t&&(t.includes("://")||(t=`https://${t}`),new URL(t),await(0,C.gj)("ConfirmInstall",{url:t}))}catch(e){e&&(0,z.PV)({text:e})}}async function bo(e,t){if(e===t)return;const n=oo.filteredScripts,l=$.scripts,o=n[e],a=l.indexOf(o),s=l.indexOf(n[t]),{id:i}=o.props;await(0,C.gj)("Move",{id:i,offset:s-a})&&(l.splice(a,1),l.splice(s,0,o),l.forEach((e,t)=>{e.props.position=t+1}),fo())}function yo(e){S.Z.set("filters.sort",e.target.value)}function xo(e){oo.search&&Do(),S.Z.set("filters.searchScope",e.target.value)}function Co(e){oo.menuNewActive=e}function ko(e){const n=v(C.Hv,[ao.value?"recycleBin":"scripts",e],"/");e||n!==(0,U.Qs)().pathname?(0,U.pV)(n):t.history.back()}async function _o(){const[e,t,n]=$.route.paths;if("_new"===t){const{script:e,code:t}=await(0,C.gj)("NewScript",n);oo.script=e,oo.code=t}else{const n=t&&+t||null,l=n&&(ao.value?$.removedScripts:$.scripts).find(e=>e.props.id===n);l?oo.code=await(0,C.gj)("GetScriptCode",t):(t&&(0,U.pV)(e,!0),oo.canRenderScripts?mo():(oo.canRenderScripts=!0,So(),ar())),oo.script=l}}async function So(){if(!oo.canRenderScripts)return;const{length:e}=oo.sortedScripts;let t=9;const n=(0,D.qj)({limit:t});oo.batchRender=n;const l=h.now();for(;t<e&&n===oo.batchRender;){if(Xl&&oo.search)for(let n=0;n<Xl&&t<e;t+=1)n+=oo.sortedScripts[t].$cache.show?1:0;else t+=Xl||1;n.limit=t,await new p(e=>(0,R.Y3)(e)),!Xl&&h.now()-l>=100&&(Xl=2*t),Xl&&t<e&&await(0,C.dL)()}}function zo(e){let t,n=0;const[,l=oo.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),o="i"]=oo.search.match(/^\/(.+?)\/(\w*)$|$/),a=Nl.searchScope,s="name"===a||"all"===a,i="code"===a||"all"===a;try{t=l&&new RegExp(l,o),e.forEach(({$cache:e})=>{e.show=!l||s&&t.test(e.search)||i&&t.test(e.code),n+=e.show}),oo.searchError=null}catch(e){oo.searchError=e.message}return n}async function Do(){const e=uo.value;null!=e&&e.length&&await Uo(e),po()}async function Uo(e){const t=await(0,C.gj)("GetScriptCode",e);$.scripts.forEach(({$cache:e,props:{id:n}})=>{n in t&&(e.code=t[n])})}async function $o(){await(0,z.GW)((0,C.ag)("buttonEmptyRecycleBin"))&&((0,C.gj)("CheckRemove",{force:!0}),$.removedScripts=[])}function Ro(){const e=Nl.viewTable?eo:to;oo.numColumns=Nl.viewSingleColumn?1:e.findIndex(e=>t.innerWidth<e)+1||e.length+1}function Eo(e){e=Math.min(e,oo.filteredScripts.length-1),(e=Math.max(e,-1))!==oo.focusedIndex&&(oo.focusedIndex=e)}function Vo(e,t){return(0,C.gj)("MarkRemoved",{id:e.props.id,removed:t})}function Io(e){e.config.removed?(0,C.gj)("RemoveScripts",[e.props.id]):Vo(e,1)}async function jo(e){try{await Vo(e,0)}catch(t){(0,z.GW)(`${t.message||t}\n\n@namespace ${e.meta.namespace}\n@name ${e.meta.name}`,{cancel:!1})}}function Wo(e){(0,C.gj)("UpdateScriptInfo",{id:e.props.id,config:{enabled:e.config.enabled?0:1}})}function To(e){(0,C.gj)("CheckUpdate",e.props.id)}function Lo(e){if(!e)return;const t=lo.value;t.scroll({top:t.scrollTop+e,behavior:"smooth"})}function Oo(){const e=()=>{var e;M.$J.setContext("buttonFocus",(null==(e=document.activeElement)?void 0:e.tabIndex)>=0)};document.addEventListener("focus",e,!0);const t=[()=>document.removeEventListener("focus",e,!0),...w?[M.$J.register("tab",()=>{(0,M.nk)(1)}),M.$J.register("s-tab",()=>{(0,M.nk)(-1)})]:[],...Ql(()=>{var e;null==(e=no.value)||e.focus()},[["ctrlcmd-f",Bl],["/",Fl,!0]]),...Ql(()=>{var e;null==(e=no.value)||e.blur()},[["enter","tabScripts && inputFocus"]]),...Ql(()=>{oo.showHotkeys=!1},[["escape",Jl],["q",Jl,!0]]),...Ql(()=>{let e=oo.focusedIndex;e<0?e=0:e+=oo.numColumns,e<oo.filteredScripts.length&&Eo(e)},[["ctrlcmd-down",Bl],["down",Bl],["j",Fl,!0]]),...Ql(()=>{const e=oo.focusedIndex-oo.numColumns;e>=0&&Eo(e)},[["ctrlcmd-up",Bl],["up",Bl],["k",Fl,!0]]),...Ql(()=>{Eo(oo.focusedIndex-1)},[["ctrlcmd-left",Bl],["left",Fl],["h",Fl,!0]]),...Ql(()=>{Eo(oo.focusedIndex+1)},[["ctrlcmd-right",Bl],["right",Fl],["l",Fl,!0]]),...Ql(()=>{Eo(0)},[["ctrlcmd-home",Bl],["g g",Fl,!0]]),...Ql(()=>{Eo(oo.filteredScripts.length-1)},[["ctrlcmd-end",Bl],["G",Fl,!0]]),...Ql(()=>{ko(ro.value.props.id)},[[Gl.edit,ql,!0],["enter",Kl]]),...Ql(()=>{Io(ro.value)},[["delete",ql],[Gl.remove,ql,!0]]),...Ql(()=>{To(ro.value)},[[Gl.update,ql,!0]]),...Ql(()=>{Wo(ro.value)},[[Gl.toggle,ql,!0]]),...Ql(()=>{jo(ro.value)},[[Gl.restore,Yl,!0]]),...Ql(()=>{oo.showHotkeys=!oo.showHotkeys},[["?",Fl,!0]])];return()=>t.forEach(e=>{e()})}const Mo={components:{Dropdown:me.Z,Tooltip:he.Z,SettingCheck:ge.Z,Icon:fe.Z,LocaleGroup:ve.Z,ScriptItem:Ut,Edit:Pl},directives:{focus:z.Tu},setup:()=>(ho(),(0,R.YP)(ao,ho),(0,R.YP)(so,e=>He(lo.value,bo,e)),(0,R.YP)(()=>oo.search,Do),(0,R.YP)(()=>[Nl.sort,Nl.showEnabledFirst],po),(0,R.YP)(()=>[Nl.viewSingleColumn,Nl.viewTable],Ro),(0,R.YP)(()=>ao.value?$.removedScripts:$.scripts,go),(0,R.YP)(()=>$.route.paths[1],_o),(0,R.YP)(ro,e=>{M.$J.setContext("selectedScript",e)}),(0,R.YP)(()=>oo.showHotkeys,e=>{M.$J.setContext("showHotkeys",e)}),(0,R.bv)(()=>{if($.loading||go(),!to.length){const t=getComputedStyle(document.documentElement);[to,eo]=["cards","table"].map(e=>{var n;return(null==(n=t.getPropertyValue(`--columns-${e}`))?void 0:n.split(",").map(Number).filter(c))||[]}),e.addEventListener("resize",Ro)}return Ro(),Oo()}),{refSearch:no,refList:lo,store:$,state:oo,filters:Nl,filterOptions:Hl,currentSortCompare:io,selectedScript:ro,draggable:so,scriptHotkeys:Gl,showRecycle:ao,message:co,handleStateChange:Co,handleOrderChange:yo,handleEditScript:ko,handleEmptyRecycleBin:$o,handleInstallFromURL:wo,handleUpdateAll:vo,handleOnScopeChange:xo,handleActionRemove:Io,handleActionRestore:jo,handleActionToggle:Wo,handleActionUpdate:To,handleSmoothScroll:Lo})},Ao=(0,zt.Z)(Mo,[["render",(e,t)=>{const n=(0,R.up)("Icon"),l=(0,R.up)("Tooltip"),o=(0,R.up)("Dropdown"),a=(0,R.up)("LocaleGroup"),s=(0,R.up)("SettingCheck"),i=(0,R.up)("script-item"),r=(0,R.up)("edit"),c=(0,R.Q2)("focus");return(0,R.wg)(),(0,R.iD)("div",Z,[e.state.canRenderScripts?((0,R.wg)(),(0,R.iD)("div",P,[(0,R._)("header",H,[e.showRecycle?((0,R.wg)(),(0,R.iD)("div",{key:1,class:"flex-auto",textContent:(0,E.zw)(e.i18n("headerRecycleBin"))},null,8,J)):((0,R.wg)(),(0,R.iD)("div",N,[(0,R.Wm)(o,{closeAfterClick:!0,class:(0,E.C_)({active:e.state.menuNewActive}),onStateChange:e.handleStateChange},{content:(0,R.w5)(()=>[(0,R._)("a",{class:"dropdown-menu-item",textContent:(0,E.zw)(e.i18n("buttonNew")),tabindex:"0",onClick:t[0]||(t[0]=(0,A.iM)(t=>e.handleEditScript("_new"),["prevent"]))},null,8,F),(0,R._)("a",{class:"dropdown-menu-item",textContent:(0,E.zw)(e.i18n("installFrom","OpenUserJS")),href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},null,8,q),(0,R._)("a",{class:"dropdown-menu-item",textContent:(0,E.zw)(e.i18n("installFrom","GreasyFork")),href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},null,8,Y),(0,R._)("a",{class:"dropdown-menu-item",textContent:(0,E.zw)(e.i18n("buttonInstallFromURL")),tabindex:"0",onClick:t[1]||(t[1]=(0,A.iM)((...t)=>e.handleInstallFromURL&&e.handleInstallFromURL(...t),["prevent"]))},null,8,K)]),default:(0,R.w5)(()=>[(0,R.Wm)(l,{content:e.i18n("buttonNew"),placement:"bottom",align:"start"},{default:(0,R.w5)(()=>[(0,R._)("a",B,[(0,R.Wm)(n,{name:"plus"})])]),_:1},8,["content"])]),_:1},8,["class","onStateChange"]),(0,R.Wm)(l,{content:e.i18n("buttonUpdateAll"),placement:"bottom",align:"start"},{default:(0,R.w5)(()=>[(0,R._)("a",{class:"btn-ghost",tabindex:"0",onClick:t[2]||(t[2]=(...t)=>e.handleUpdateAll&&e.handleUpdateAll(...t))},[(0,R.Wm)(n,{name:"refresh"})])]),_:1},8,["content"])])),(0,R.Wm)(o,{align:"right",class:"filter-sort"},{content:(0,R.w5)(()=>[(0,R._)("div",null,[(0,R.Wm)(a,{"i18n-key":"labelFilterSort"},{default:(0,R.w5)(()=>[(0,R._)("select",{value:e.filters.sort,onChange:t[3]||(t[3]=(...t)=>e.handleOrderChange&&e.handleOrderChange(...t))},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.filterOptions.sort,(e,t)=>((0,R.wg)(),(0,R.iD)("option",{textContent:(0,E.zw)(e.title),key:t,value:t},null,8,X))),128))],40,Q)]),_:1})]),(0,R.wy)((0,R._)("div",null,[(0,R.Wm)(s,{name:"filters.showEnabledFirst",label:e.i18n("optionShowEnabledFirst")},null,8,["label"])],512),[[A.F8,e.currentSortCompare]]),(0,R._)("div",null,[(0,R.Wm)(s,{name:"filters.showOrder",label:e.i18n("labelShowOrder")},null,8,["label"])]),(0,R._)("div",ee,[(0,R.Wm)(s,{name:"filters.viewTable",label:e.i18n("labelViewTable")},null,8,["label"]),(0,R.Wm)(s,{name:"filters.viewSingleColumn",label:e.i18n("labelViewSingleColumn")},null,8,["label"])])]),default:(0,R.w5)(()=>[(0,R.Wm)(l,{content:e.i18n("labelSettings"),placement:"bottom"},{default:(0,R.w5)(()=>[(0,R._)("a",G,[(0,R.Wm)(n,{name:"cog"})])]),_:1},8,["content"])]),_:1}),(0,R._)("form",{class:"filter-search hidden-xs flex",onSubmit:t[7]||(t[7]=(0,A.iM)(()=>{},["prevent"]))},[(0,R.Wm)(l,{placement:"bottom"},{content:(0,R.w5)(()=>[(0,R._)("pre",{class:"filter-search-tooltip",textContent:(0,E.zw)(e.state.searchError||e.i18n("titleSearchHint"))},null,8,ne)]),default:(0,R.w5)(()=>[(0,R._)("label",null,[(0,R.wy)((0,R._)("input",{type:"search",class:(0,E.C_)({"has-error":e.state.searchError}),placeholder:e.i18n("labelSearchScript"),"onUpdate:modelValue":t[4]||(t[4]=t=>e.state.search=t),ref:"refSearch",id:"installed-search"},null,10,te),[[A.nr,e.state.search]]),(0,R.Wm)(n,{name:"search"})])]),_:1}),(0,R.wy)((0,R._)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.filters.searchScope=t),onChange:t[6]||(t[6]=(...t)=>e.handleOnScopeChange&&e.handleOnScopeChange(...t))},[(0,R._)("option",{value:"name",textContent:(0,E.zw)(e.i18n("filterScopeName"))},null,8,le),(0,R._)("option",{value:"code",textContent:(0,E.zw)(e.i18n("filterScopeCode"))},null,8,oe),(0,R._)("option",{value:"all",textContent:(0,E.zw)(e.i18n("filterScopeAll"))},null,8,ae)],544),[[A.bM,e.filters.searchScope]])],32)]),e.showRecycle?((0,R.wg)(),(0,R.iD)("div",se,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("hintRecycleBin"))},null,8,ie),e.store.removedScripts.length?((0,R.wg)(),(0,R.iD)("a",{key:0,textContent:(0,E.zw)(e.i18n("buttonEmptyRecycleBin")),tabindex:"0",onClick:t[8]||(t[8]=(...t)=>e.handleEmptyRecycleBin&&e.handleEmptyRecycleBin(...t))},null,8,re)):(0,R.kq)("",!0)])):e.message?((0,R.wg)(),(0,R.iD)("div",{key:1,class:"hint mx-1 my-1 flex flex-col",textContent:(0,E.zw)(e.message)},null,8,ce)):(0,R.kq)("",!0),(0,R.wy)(((0,R.wg)(),(0,R.iD)("div",{class:"scripts",ref:"refList",style:(0,E.j5)(`--num-columns:${e.state.numColumns}`),"data-columns":e.state.numColumns,"data-show-order":e.filters.showOrder||null,"data-table":e.filters.viewTable||null},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.state.sortedScripts,(t,n)=>(0,R.wy)(((0,R.wg)(),(0,R.j4)(i,{key:t.props.id,focused:e.selectedScript===t,showHotkeys:e.state.showHotkeys,script:t,draggable:e.draggable,visible:n<e.state.batchRender.limit,viewTable:e.filters.viewTable,hotkeys:e.scriptHotkeys,onRemove:e.handleActionRemove,onRestore:e.handleActionRestore,onToggle:e.handleActionToggle,onUpdate:e.handleActionUpdate,onScrollDelta:e.handleSmoothScroll},null,8,["focused","showHotkeys","script","draggable","visible","viewTable","hotkeys","onRemove","onRestore","onToggle","onUpdate","onScrollDelta"])),[[A.F8,!e.state.search||!1!==t.$cache.show]])),128))],12,ue)),[[c,!e.state.script]])])):(0,R.kq)("",!0),e.state.script?((0,R.wg)(),(0,R.j4)(R.lR,{key:1,to:"body"},[(0,R.Wm)(r,{initial:e.state.script,"initial-code":e.state.code,"read-only":!!e.state.script.config.removed,onClose:t[9]||(t[9]=t=>e.handleEditScript())},null,8,["initial","initial-code","read-only"])])):(0,R.kq)("",!0)])}]]),Zo=Ao,Po=["data-show-advanced"],Ho=["textContent"],No={class:"mb-1c"},Bo=["textContent"],Fo={class:"ml-2c flex flex-col"},qo=["textContent"],Yo={class:"ml-2c"},Ko=["onUpdate:modelValue"],Jo=["value","textContent"],Go=["onUpdate:modelValue"],Qo=["value","textContent"],Xo=["textContent"],ea=["onUpdate:modelValue"],ta=["value","textContent"],na=["textContent"],la=["onUpdate:modelValue"],oa=["textContent"],aa={class:"mb-1c"},sa=["textContent"],ia={class:"ml-2c flex flex-col"},ra={class:"ml-2c flex flex-col"},ca={class:"mb-2c"},ua=["textContent"],da=["open"],pa=["onClick"],ma={class:"mb-1c"},ha=["textContent"],ga=["onUpdate:modelValue"],fa=["value","textContent"],va={class:"ml-2c flex flex-col"},wa=["textContent"],ba=["onUpdate:modelValue"],ya=["value","textContent"],xa=["textContent"],Ca=(0,R._)("code",null,"page",-1),ka={key:0},_a=(0,R._)("code",null,"page",-1),Sa=["textContent"],za=["href"];var Da=g(9285);const Ua=(0,g(3055).HP)(async()=>{await("/public/lib/zip-no-worker.min.js",new p((e,t)=>{const n=document.createElement("script");n.src="/public/lib/zip-no-worker.min.js",n.onload=e,n.onerror=t,document.body.append(n)}));const{zip:e}=t,n=["/public/lib/z-worker.js"];return e.configure({workerScripts:{deflate:n,inflate:n}}),e}),$a=["textContent","disabled"],Ra=["disabled","textContent"],Ea={class:"mt-1"},Va=(0,R._)("br",null,null,-1),Ia={class:"import-report"},ja=["data-type"],Wa=["textContent"],Ta=["textContent","colspan"],La=(0,D.qj)([]),Oa={components:{SettingCheck:ge.Z,Tooltip:he.Z},data(){return{reports:La,store:$,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const e=document.createElement("input");e.type="file",e.accept=".zip",e.onchange=()=>{var t;return Ma(null==(t=e.files)?void 0:t[0])},e.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=this.i18n("buttonVacuuming");const{fixes:e,errors:t}=await(0,C.gj)("Vacuum"),n=null==t?void 0:t.join("\n");this.vacuuming=!1,this.labelVacuum=this.i18n("buttonVacuumed")+(e?` (${e})`:""),n&&(0,z.PV)({text:n})}},mounted(){const e=Za(this.$refs.buttonImport);t.addEventListener("hashchange",e),e()}};async function Ma(e){if(!$.importing)try{await($.importing=Aa(e))}finally{$.importing=null}}async function Aa(e){if(!e)return;La.length=0;const t=await Ua(),n=new t.ZipReader(new t.BlobReader(e)),l=await n.getEntries().catch(f)||[];if(La.length)return;f("",e.name,"info");const o={},a=l.reduce((e,t)=>{var n;return e+(null==(n=t.filename)?void 0:n.endsWith(".user.js"))},0),s=l.find(e=>{var t;return"violentmonkey"===(null==(t=e.filename)?void 0:t.toLowerCase())}),i=s&&await g(s)||{};var r,u;function m(e,t){try{return JSON.parse(e)}catch(e){f(e,t.filename,null)}}function h(e,t){return p.all(l.map(async n=>{const{filename:l}=n;if(null!=l&&l.endsWith(t)){const o=await g(n);return o&&e(n,o,l.slice(0,-t.length))}}))}async function g(e){const n=await e.getData(new t.TextWriter);return e.filename.endsWith(".js")?n:m(n,e)}function f(e,t,n="critical"){La.push({text:e,name:t,type:n})}function v(e=""){const t=d.keys(o).length,n=(0,C.ag)("msgImported",[t===a?t:`${t} / ${a}`]);return La[0].name=n,La[0].text=e,n}function w(e){return(0,C.rY)(e).filter(e=>"string"==typeof e)}i.scripts||(i.scripts={}),i.values||(i.values={}),await h(async(e,t,n)=>{const{meta:l,settings:o={},options:a}=t;if(!l||!a)return;const s=a.override||{};La[0].text="Tampermonkey",i.scripts[n]={config:{enabled:!1!==o.enabled?1:0,shouldUpdate:a.check_for_updates?1:0},custom:{downloadURL:"string"==typeof l.file_url?l.file_url:void 0,noframes:null==s.noframes?void 0:+!!s.noframes,runAt:ml.qh.test(a.run_at)?a.run_at:void 0,exclude:w(s.use_excludes),include:w(s.use_includes),match:w(s.use_matches),origExclude:!1!==s.merge_excludes,origInclude:!1!==s.merge_includes,origMatch:!1!==s.merge_matches},position:+o.position||void 0,props:{lastModified:+l.modified,lastUpdated:+l.modified}}},".options.json"),await h(async(e,t,n)=>{var l,a,s,r;const{filename:c}=e,u=i.scripts[n],d=(0,Nt.Z)({code:t},u&&{custom:u.custom,config:(0,Nt.Z)({enabled:null!=(l=u.enabled)?l:1,shouldUpdate:null!=(a=u.update)?a:1},u.config),position:u.position,props:{lastModified:u.lastModified||(null==(s=u.props)?void 0:s.lastModified)||+e.lastModDate,lastUpdated:u.lastUpdated||(null==(r=u.props)?void 0:r.lastUpdated)||+e.lastModDate}});try{o[n]=(await(0,C.gj)("ParseScript",d)).update.props.uri,v(c)}catch(e){f(e,c,"script")}},".user.js"),S.Z.get("importScriptData")&&(await h(async(e,t,n)=>{La[0].text="Tampermonkey",i.values[o[n]]=t.data},".storage.json"),(0,C.gj)("SetValueStores",i.values)),S.Z.get("importSettings")&&(0,C.gj)("SetOptions",(r=i.settings,u=([e,t])=>"sync"!==e&&{key:e,value:t},d.entries(r||{}).map(u).filter(c))),(0,C.gj)("CheckPosition"),(0,z.PV)({text:v()}),await n.close()}function Za(e){let n;const l=t=>e.classList.toggle("drop-allowed",t),o=()=>l(!1),a=()=>{clearTimeout(n),n=setTimeout(o,250)},s=e=>{clearTimeout(n);const t=e.dataTransfer.types.includes("Files");t&&e.preventDefault(),l(t)},i=async e=>{e.preventDefault(),l(!1);const t=e.dataTransfer.files[0];await(0,z.GW)((0,C.ag)("buttonImportData"))&&await Ma(t)};return()=>{const e="#settings"===t.location.hash,n=document[(e?"add":"remove")+"EventListener"];v(n,document,"dragend",o),v(n,document,"dragleave",a),v(n,document,"dragover",s),v(n,document,"drop",i)}}const Pa=(0,zt.Z)(Oa,[["render",(e,t)=>{const n=(0,R.up)("tooltip"),l=(0,R.up)("setting-check");return(0,R.wg)(),(0,R.iD)("div",null,[(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonImportData")),onClick:t[0]||(t[0]=(...t)=>e.pickBackup&&e.pickBackup(...t)),ref:"buttonImport",disabled:e.store.importing},null,8,$a),(0,R.Wm)(n,{content:e.i18n("hintVacuum")},{default:(0,R.w5)(()=>[(0,R._)("button",{onClick:t[1]||(t[1]=(...t)=>e.vacuum&&e.vacuum(...t)),disabled:e.vacuuming,textContent:(0,E.zw)(e.labelVacuum)},null,8,Ra)]),_:1},8,["content"]),(0,R._)("div",Ea,[(0,R.Wm)(l,{name:"importScriptData",label:e.i18n("labelImportScriptData")},null,8,["label"]),Va,(0,R.Wm)(l,{name:"importSettings",label:e.i18n("labelImportSettings")},null,8,["label"])]),(0,R._)("table",Ia,[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.reports,({type:e,name:t,text:n},l)=>((0,R.wg)(),(0,R.iD)("tr",{key:l,"data-type":e},[t?((0,R.wg)(),(0,R.iD)("td",{key:0,textContent:(0,E.zw)(t)},null,8,Wa)):(0,R.kq)("",!0),(0,R._)("td",{textContent:(0,E.zw)(n),colspan:t?null:2},null,8,Ta)],8,ja))),128))])])}]]),Ha={class:"export"},Na={class:"flex flex-wrap center-items mr-1c"},Ba=["textContent","disabled"],Fa={href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"},qa=["textContent"],Ya={class:"mt-1"},Ka={class:"modal-content"},Ja=["download","href"],Ga=(0,R._)("br",null,null,-1),Qa=(0,R._)("strong",null,"scripts.zip",-1);var Xa=g(3011),es=g(8346),ts=g(3795),ns=g(8860),ls=g(3220);w&&($.ffDownload={});const os={components:{SettingCheck:ge.Z,SettingText:ns.Z,Icon:fe.Z,Modal:Xa.Z,Tooltip:he.Z},data:()=>({store:$,dateTokens:d.keys(es.q).join(", "),exporting:!1}),methods:{async handleExport(){try{this.exporting=!0,as(await is(),this.getFileName())}finally{this.exporting=!1}},getFileName(){var e;const{tpl:t}=this.$refs;return t&&`${(0,es.p)((null==(e=t.value)?void 0:e.trim())||t.defaultValue)}.zip`}}};function as(e,t){const n=ts.Z.firefox;if(n&&("win"===ts.Z.os?n<56:"mac"===ts.Z.os?n<61:n<63)){const n=new FileReader;n.onload=()=>{$.ffDownload={name:t,url:n.result}},n.readAsDataURL(e)}else(0,ls.l)(e,t)}function ss(e){return e.replace(/[\\/:*?"<>|]/g,"-")}async function is(){const e=S.Z.get("exportValues"),t=await(0,C.gj)("ExportZip",{values:e}),n={},l={scripts:{},settings:S.Z.get()};delete l.settings.sync,e&&(l.values={});const o=((0,pe._M)(t,"items")||[]).map(({script:o,code:a})=>{let s=ss((0,C.pV)(o));n[s]?(n[s]+=1,s=`${s}_${n[s]}`):n[s]=1;const{lastModified:i,lastUpdated:r}=o.props,c={custom:o.custom,config:o.config,position:o.props.position,lastModified:i,lastUpdated:r};if(e){const e=t.values[o.props.id];e&&(l.values[o.props.uri]=e)}return l.scripts[s]=c,{name:`${s}.user.js`,content:a,lastModDate:new Date(r||i)}});o.push({name:"violentmonkey",content:JSON.stringify(l)});const a=await Ua(),s=new a.BlobWriter("application/zip"),i=new a.ZipWriter(s,{bufferedWrite:!0,keepOrder:!1});return await p.all(o.map(e=>i.add(e.name,new a.TextReader(e.content),{lastModDate:e.lastModDate}))),await i.close()}const rs=(0,zt.Z)(os,[["render",(e,t,n,l,o,a)=>{const s=(0,R.up)("setting-text"),i=(0,R.up)("icon"),r=(0,R.up)("tooltip"),c=(0,R.up)("setting-check"),u=(0,R.up)("modal");return(0,R.wg)(),(0,R.iD)("div",Ha,[(0,R._)("div",Na,[(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonExportData")),onClick:t[0]||(t[0]=(...e)=>a.handleExport&&a.handleExport(...e)),disabled:o.exporting},null,8,Ba),(0,R.Wm)(s,{name:"exportNameTemplate",ref:"tpl","has-reset":"","has-save":!1,rows:1,class:"tpl flex flex-1 center-items ml-1c"},null,512),(0,R.Wm)(r,{content:e.i18n("msgDateFormatInfo",o.dateTokens),placement:"left"},{default:(0,R.w5)(()=>[(0,R._)("a",Fa,[(0,R.Wm)(i,{name:"info"})])]),_:1},8,["content"]),(0,R._)("span",{hidden:"",textContent:(0,E.zw)(a.getFileName())},null,8,qa)]),(0,R._)("div",Ya,[(0,R.Wm)(c,{name:"exportValues",label:e.i18n("labelExportScriptData")},null,8,["label"])]),o.store.ffDownload?((0,R.wg)(),(0,R.j4)(u,{key:0,transition:"in-out",visible:!!o.store.ffDownload.url,onClose:t[1]||(t[1]=e=>o.store.ffDownload={})},{default:(0,R.w5)(()=>[(0,R._)("div",Ka,[(0,R._)("a",{download:o.store.ffDownload.name,href:o.store.ffDownload.url},[(0,R.Uk)(" Right click and save as"),Ga,Qa],8,Ja)])]),_:1},8,["visible"])):(0,R.kq)("",!0)])}]]),cs={class:"mb-1c"},us=["textContent"],ds={key:0,class:"flex flex-wrap center-items"},ps=["textContent"],ms=["value"],hs=["textContent","value"],gs=["textContent","disabled"],fs=["disabled"],vs=["textContent"],ws={key:1,class:"mt-1c"},bs={class:"sync-server-url"},ys=["textContent"],xs=["disabled"],Cs={class:"mr-2c"},ks=["textContent"],_s=["disabled"],Ss={class:"inline-block"},zs=["textContent"],Ds=["disabled"],Us=["disabled"],$s=["textContent"],Rs=["textContent","disabled"],Es={key:2},Vs="sync.current",Is={current:""};(0,de.Z)(Vs,e=>{Is.current=e||""});const js={components:{SettingCheck:ge.Z,Icon:fe.Z,Tooltip:he.Z},data:()=>({syncConfig:Is,store:$}),computed:{syncServices(){const e=this.store.sync;return e&&e.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...e]:null},service(){if(this.syncServices){const e=this.syncConfig.current||"";let t=this.syncServices.find(t=>t.name===e);return t||(console.warn("Invalid current service:",e),t=this.syncServices[0]),t}return null},state(){const{service:e}=this;if(e){const t=["idle","error"].includes(e.syncState)&&["no-auth","unauthorized","error","authorized"].includes(e.authState),n=t&&"authorized"===e.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:t,canSync:n,authType:e.properties.authType,userConfig:e.userConfig||{}}}return null}},methods:{onSaveUserConfig(){(0,C.gj)("SyncSetConfig",this.state.userConfig)},onSyncChange(e){const{value:t}=e.target;S.Z.set(Vs,t)},onAuthorize(){const{service:e}=this;["authorized"].includes(e.authState)?(0,C.gj)("SyncRevoke"):["no-auth","unauthorized","error"].includes(e.authState)&&(0,C.gj)("SyncAuthorize")},onSync(){(0,C.gj)("SyncStart")},getMessage(){const{service:e}=this;if("initializing"===e.authState)return this.i18n("msgSyncInit");if("no-auth"===e.authState)return this.i18n("msgSyncNoAuthYet");if("error"===e.authState)return this.i18n("msgSyncInitError");if("unauthorized"===e.authState)return this.i18n("msgSyncInitError");if("error"===e.syncState)return this.i18n("msgSyncError");if("ready"===e.syncState)return this.i18n("msgSyncReady");if("syncing"===e.syncState){let t="";return e.progress&&e.progress.total&&(t=` (${e.progress.finished}/${e.progress.total})`),this.i18n("msgSyncing")+t}if(e.lastSync){const t=new Date(e.lastSync).toLocaleString();return this.i18n("lastSync",t)}},getLabel(){const{service:e}=this;return"authorizing"===e.authState?this.i18n("labelSyncAuthorizing"):"authorized"===e.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},Ws=(0,zt.Z)(js,[["render",(e,t,n,l,o,a)=>{var s,i;const r=(0,R.up)("icon"),c=(0,R.up)("tooltip"),u=(0,R.up)("setting-check");return(0,R.wg)(),(0,R.iD)("section",cs,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("labelSync"))},null,8,us),a.state?((0,R.wg)(),(0,R.iD)("div",ds,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelSyncService"))},null,8,ps),(0,R._)("select",{class:"mx-1",value:o.syncConfig.current,onChange:t[0]||(t[0]=(...e)=>a.onSyncChange&&a.onSyncChange(...e))},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(a.syncServices,e=>((0,R.wg)(),(0,R.iD)("option",{key:e.name,textContent:(0,E.zw)(e.displayName),value:e.name},null,8,hs))),128))],40,ms),a.service.name&&"oauth"===a.state.authType?((0,R.wg)(),(0,R.iD)("button",{key:0,textContent:(0,E.zw)(a.state.label),disabled:!a.state.canAuthorize,onClick:t[1]||(t[1]=(...e)=>a.onAuthorize&&a.onAuthorize(...e))},null,8,gs)):(0,R.kq)("",!0),a.service.name?((0,R.wg)(),(0,R.j4)(c,{key:1,content:e.i18n("labelSync"),class:"stretch-self flex mr-1"},{default:(0,R.w5)(()=>[(0,R._)("button",{disabled:!a.state.canSync,onClick:t[2]||(t[2]=(...e)=>a.onSync&&a.onSync(...e)),class:"flex center-items"},[(0,R.Wm)(r,{name:"refresh"})],8,fs)]),_:1},8,["content"])):(0,R.kq)("",!0),a.state?((0,R.wg)(),(0,R.iD)("p",{key:2,textContent:(0,E.zw)(a.state.message)},null,8,vs)):(0,R.kq)("",!0)])):(0,R.kq)("",!0),"password"===(null==(s=a.state)?void 0:s.authType)?((0,R.wg)(),(0,R.iD)("fieldset",ws,[(0,R._)("label",bs,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelSyncServerUrl"))},null,8,ys),(0,R.wy)((0,R._)("input",{type:"url","onUpdate:modelValue":t[3]||(t[3]=e=>a.state.userConfig.serverUrl=e),disabled:!a.state.canAuthorize},null,8,xs),[[A.nr,a.state.userConfig.serverUrl]])]),(0,R._)("div",Cs,[(0,R._)("label",null,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelSyncUsername"))},null,8,ks),(0,R.wy)((0,R._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.state.userConfig.username=e),disabled:!a.state.canAuthorize||a.state.userConfig.anonymous},null,8,_s),[[A.nr,a.state.userConfig.username]])]),(0,R._)("label",Ss,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelSyncPassword"))},null,8,zs),(0,R.wy)((0,R._)("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>a.state.userConfig.password=e),disabled:!a.state.canAuthorize||a.state.userConfig.anonymous},null,8,Ds),[[A.nr,a.state.userConfig.password]])]),(0,R._)("label",null,[(0,R.wy)((0,R._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>a.state.userConfig.anonymous=e),disabled:!a.state.canAuthorize},null,8,Us),[[A.e8,a.state.userConfig.anonymous]]),(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelSyncAnonymous"))},null,8,$s)])]),(0,R._)("div",null,[(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonSave")),onClick:t[7]||(t[7]=(0,A.iM)((...e)=>a.onSaveUserConfig&&a.onSaveUserConfig(...e),["prevent"])),disabled:!a.state.canAuthorize},null,8,Rs)])])):(0,R.kq)("",!0),null!=(i=a.service)&&i.name?((0,R.wg)(),(0,R.iD)("div",Es,[(0,R.Wm)(u,{name:"syncScriptStatus",label:e.i18n("labelSyncScriptStatus")},null,8,["label"])])):(0,R.kq)("",!0)])}]]),Ts=["textContent"],Ls={class:"mr-1c flex center-items"},Os=["textContent"],Ms=["disabled","title"],As=["value","textContent"],Zs=["textContent"],Ps=["textContent"],Hs=["href"],Ns=["textContent"],Bs=["innerHTML"],Fs=["textContent"],qs=["textContent"],Ys="editorTheme",Ks="editorThemeName",Js=["3024-day","3024-night","abbott","abcdef","ambiance-mobile","ambiance","ayu-dark","ayu-mirage","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","darcula","dracula","duotone-dark","duotone-light","eclipse","elegant","erlang-dark","gruvbox-dark","hopscotch","icecoder","idea","isotope","juejin","lesser-dark","liquibyte","lucario","material-darker","material-ocean","material-palenight","material","mbo","mdn-like","midnight","monokai","moxer","neat","neo","night","nord","oceanic-next","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","shadowfox","solarized","ssms","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","yonce","zenburn"],Gs="codemirror/CodeMirror",Qs=`https://github.com/${Gs}/tree/master/theme`,Xs="default",ei=e=>e?e.split("\n",21).map((e,t)=>(20===t?"...":e.length>100&&`${e.slice(0,100)}...`)||e).join("\n"):null,ti={data:()=>({hint:null,busy:!1,error:null,css:null,theme:null,themes:Js,DEFAULT:Xs,ghURL:Qs}),components:{SettingText:ns.Z},beforeUnmount(){this.revokers.forEach(e=>e()),this.revokers=null},async mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean),this.revokers||(this.css=ei(S.Z.get(Ys)),this.revokers=[(0,de.Z)(Ks,e=>{this.theme=null!=e?e:Xs})],await S.Z.ready,this.$watch("theme",async e=>{const t=e&&e!==Xs&&`https://raw.githubusercontent.com/${Gs}/master/theme/${e}.css`,n=t&&await this.fetch(t);S.Z.set(Ks,!t||n?e:Xs),S.Z.set(Ys,n||""),this.css=ei(n)}))},methods:{async fetch(e,t="text"){const n=document.activeElement;this.busy=!0;try{const l=await(await fetch(e))[t]();return this.error=null,l}catch(e){this.error=e.message||e.code||`${e}`}finally{this.busy=!1,this.$nextTick(()=>null==n?void 0:n.focus())}},onSave(){(0,z.PV)({text:this.$refs.editor.error||this.i18n("msgSavedEditorOptions")})},toggleBoolean(e){const t=e.target,{selectionStart:n,selectionEnd:l,value:o}=t,a={false:"true",true:"false"}[o.slice(n,l)];a&&!document.execCommand("insertText",!1,a)&&(t.value=o.slice(0,n)+a+o.slice(l),t.setSelectionRange(n+a.length,n+a.length),t.dispatchEvent(new Event("input")),t.onblur=()=>t.dispatchEvent(new Event("change")))},async toggleStateHint(){if(this.hint)return void(this.hint=null);const e=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],n={};d.entries((0,Nt.Z)({},(await p.resolve().then(g.t.bind(g,4631,23))).default.defaults,(await p.resolve().then(g.bind(g,1181))).default.data().cmDefaults,S.Z.get("editor"))).sort(([e],[t])=>e<t?-1:e>t).filter(([t,n])=>!e.includes(t)&&!r(n)).forEach(([e,t])=>{n[e]=t}),this.hint=JSON.stringify(n,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>t.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},ni=(0,zt.Z)(ti,[["render",(e,t,n,l,o,a)=>{const s=(0,R.up)("setting-text");return(0,R.wg)(),(0,R.iD)("section",null,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("labelEditor"))},null,8,Ts),(0,R._)("div",Ls,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelTheme"))},null,8,Os),(0,R.wy)((0,R._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.theme=e),disabled:o.busy,title:o.css},[(0,R._)("option",{value:o.DEFAULT,textContent:(0,E.zw)(e.i18n("labelRunAtDefault"))},null,8,As),(0,R._)("option",{value:"",textContent:(0,E.zw)(e.i18n("labelBadgeNone"))},null,8,Zs),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(o.themes,e=>((0,R.wg)(),(0,R.iD)("option",{key:e,textContent:(0,E.zw)(e)},null,8,Ps))),128))],8,Ms),[[A.bM,o.theme]]),(0,R._)("a",{href:o.ghURL,target:"_blank"},"\u2197",8,Hs),(0,R._)("p",{textContent:(0,E.zw)(o.error)},null,8,Ns)]),(0,R._)("p",{innerHTML:e.i18n("descEditorOptions"),class:"my-1"},null,8,Bs),(0,R.Wm)(s,{name:"editor",ref:"editor",json:!0,"has-reset":!0,onSave:a.onSave},{default:(0,R.w5)(()=>[(0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonShowEditorState")),onClick:t[1]||(t[1]=(...e)=>a.toggleStateHint&&a.toggleStateHint(...e))},null,8,Fs)]),_:1},8,["onSave"]),(0,R._)("pre",{textContent:(0,E.zw)(o.hint),class:"monospace-font dim-hint"},null,8,qs)])}]]),li=["textContent"],oi={components:{SettingText:ns.Z},methods:{onSave(){(0,z.PV)({text:this.i18n("msgSavedScriptTemplate")})}}},ai=(0,zt.Z)(oi,[["render",(e,t,n,l,o,a)=>{const s=(0,R.up)("setting-text");return(0,R.wg)(),(0,R.iD)("section",null,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("labelScriptTemplate"))},null,8,li),(0,R.Wm)(s,{name:"scriptTemplate",onSave:a.onSave,"has-reset":""},null,8,["onSave"])])}]]),si=["textContent"],ii=["textContent"],ri={class:"flex flex-wrap"},ci={key:0,class:"text-red"},ui=["textContent"],di={components:{SettingText:ns.Z},data:()=>({errors:null}),methods:{onSave(){(0,z.PV)({text:this.i18n("msgSavedBlacklist")})}},async mounted(){this.errors=await(0,C.gj)("Storage",["base","getOne",ml.BZ])}},pi=(0,zt.Z)(di,[["render",(e,t,n,l,o,a)=>{const s=(0,R.up)("setting-text");return(0,R.wg)(),(0,R.iD)("section",null,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("labelBlacklist"))},null,8,si),(0,R._)("p",null,[(0,R.Uk)((0,E.zw)(e.i18n("descBlacklist"))+" ",1),(0,R._)("a",{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("learnBlacklist"))},null,8,ii)]),(0,R._)("div",ri,[(0,R.Wm)(s,{name:"blacklist",class:"flex-1",onSave:a.onSave,onBgError:t[0]||(t[0]=e=>o.errors=e)},null,8,["onSave"]),o.errors?((0,R.wg)(),(0,R.iD)("ol",ci,[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(o.errors,e=>((0,R.wg)(),(0,R.iD)("li",{key:e,textContent:(0,E.zw)(e)},null,8,ui))),128))])):(0,R.kq)("",!0)])])}]]),mi=["textContent"],hi=["innerHTML"],gi={components:{SettingText:ns.Z},methods:{onSave(){(0,z.PV)({text:this.i18n("msgSavedCustomCSS")})}}},fi=(0,zt.Z)(gi,[["render",(e,t,n,l,o,a)=>{const s=(0,R.up)("setting-text");return(0,R.wg)(),(0,R.iD)("section",null,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("labelCustomCSS"))},null,8,mi),(0,R._)("p",{innerHTML:e.i18n("descCustomCSS")},null,8,hi),(0,R.Wm)(s,{name:"customCSS",onSave:a.onSave},null,8,["onSave"])])}]]),vi={badgeColor:(0,C.ag)("titleBadgeColor"),badgeColorBlocked:(0,C.ag)("titleBadgeColorBlocked")},wi=d.keys(vi),bi={enum:vi,normalize:(e,t)=>/^#[0-9a-f]{6}$/i.test(e)?e:Da.Z[t]},yi=(0,Nt.Z)({autoUpdate:{normalize:e=>Math.max(0,Math.min(365,+e||0))},defaultInjectInto:{enum:{[n]:"",[a]:"",[l]:""}},showAdvanced:{normalize:e=>e},showBadge:{enum:{"":(0,C.ag)("labelBadgeNone"),unique:(0,C.ag)("labelBadgeUnique"),total:(0,C.ag)("labelBadgeTotal")}},"filtersPopup.hideDisabled":{enum:{"":(0,C.ag)("optionPopupShowDisabled"),group:(0,C.ag)("optionPopupGroupDisabled"),hide:(0,C.ag)("optionPopupHideDisabled")}},"filtersPopup.sort":{enum:{exec:(0,C.ag)("filterExecutionOrder"),alpha:(0,C.ag)("filterAlphabeticalOrder")}},uiTheme:{enum:{"":(0,C.ag)("optionUiThemeAuto"),dark:(0,C.ag)("optionUiThemeDark"),light:(0,C.ag)("optionUiThemeLight")}},xhrInject:{normalize:e=>e}},v(pe.Xw,vi,()=>bi)),xi=(e,t)=>f(yi[t].enum,e)?e:d.keys(yi[t].enum)[0],Ci=(e,t)=>(0,C.Ds)((n,l)=>{(n=t(n,e))!==(l=t(l,e))&&S.Z.set(e,n)},50),ki=(0,D.qj)({}),_i={components:{VmImport:Pa,VmExport:rs,VmSync:Ws,VmEditor:ni,VmTemplate:ai,VmBlacklist:pi,VmCss:fi,SettingCheck:ge.Z,LocaleGroup:ve.Z,Tooltip:he.Z},data:()=>({expose:null,items:yi,settings:ki}),computed:{editorWindowHint(){var e;return null!=(e=m.windows)&&e.onBoundsChanged?null:this.i18n("optionEditorWindowHint")},isCustomBadgeColor:()=>wi.some(e=>ki[e]!==Da.Z[e])},methods:{onResetBadgeColors(){wi.forEach(e=>{ki[e]=Da.Z[e]})}},activated(){(0,z.wO)(this.$el)},created(){this.revokers=[],v(pe.LI,yi,([e,{normalize:t=xi}])=>{this.revokers.push((0,de.Z)(e,n=>{ki[e]=t(n,e)})),this.$watch(()=>ki[e],Ci(e,t))}),this.expose=d.keys(S.Z.get(o)).map(e=>[e,decodeURIComponent(e)]),Ua()},beforeUnmount(){this.revokers.forEach(e=>{e()})}},Si=(0,zt.Z)(_i,[["render",(e,t)=>{var n;const l=(0,R.up)("setting-check"),o=(0,R.up)("tooltip"),a=(0,R.up)("locale-group"),s=(0,R.up)("vm-import"),i=(0,R.up)("vm-export"),r=(0,R.up)("vm-sync"),c=(0,R.up)("vm-editor"),u=(0,R.up)("vm-template"),d=(0,R.up)("vm-blacklist"),p=(0,R.up)("vm-css");return(0,R.wg)(),(0,R.iD)("div",{class:"tab-settings","data-show-advanced":e.settings.showAdvanced},[(0,R._)("h1",{textContent:(0,E.zw)(e.i18n("labelSettings"))},null,8,Ho),(0,R._)("section",No,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("optionPopup"))},null,8,Bo),(0,R._)("div",null,[(0,R.Wm)(l,{name:"autoReload",label:e.i18n("labelAutoReloadCurrentTab")},null,8,["label"])]),(0,R._)("div",Fo,[(0,R.Wm)(l,{name:"editorWindow",class:"mr-2",ref:"EW"},{default:(0,R.w5)(()=>[(0,R.Wm)(o,{content:e.editorWindowHint,disabled:!e.editorWindowHint},{default:(0,R.w5)(()=>[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("optionEditorWindow"))},null,8,qo)]),_:1},8,["content","disabled"])]),_:1},512),(0,R.wy)((0,R.Wm)(l,{name:"editorWindowSimple",label:e.i18n("optionEditorWindowSimple")},null,8,["label"]),[[A.F8,null==(n=e.$refs.EW)?void 0:n.value]])]),(0,R._)("div",Yo,[(0,R._)("label",null,[(0,R.Wm)(a,{"i18n-key":"labelPopupSort"},{default:(0,R.w5)(()=>[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(["filtersPopup.sort"],t=>(0,R.wy)(((0,R.wg)(),(0,R.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.items[t].enum,(e,n)=>((0,R.wg)(),(0,R.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,E.zw)(e)},null,8,Jo))),128))],8,Ko)),[[A.bM,e.settings[t]]])),128))]),_:1})]),(0,R.wy)((0,R.Wm)(l,{name:"filtersPopup.groupRunAt",label:e.i18n("optionPopupGroupRunAt")},null,8,["label"]),[[A.F8,"exec"===e.settings["filtersPopup.sort"]]]),(0,R._)("label",null,[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(["filtersPopup.hideDisabled"],t=>(0,R.wy)(((0,R.wg)(),(0,R.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.items[t].enum,(e,n)=>((0,R.wg)(),(0,R.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,E.zw)(e)},null,8,Qo))),128))],8,Go)),[[A.bM,e.settings[t]]])),128))]),(0,R.wy)((0,R.Wm)(l,{name:"filtersPopup.enabledFirst",label:e.i18n("optionPopupEnabledFirst")},null,8,["label"]),[[A.F8,!e.settings["filtersPopup.hideDisabled"]]])]),(0,R._)("div",null,[(0,R._)("label",null,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelBadge"))},null,8,Xo),((0,R.wg)(),(0,R.iD)(R.HY,null,(0,R.Ko)(["showBadge"],t=>(0,R.wy)((0,R._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.items[t].enum,(e,n)=>((0,R.wg)(),(0,R.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,E.zw)(e)},null,8,ta))),128))],8,ea),[[A.bM,e.settings[t]]])),64))])]),(0,R._)("div",null,[(0,R._)("label",null,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelBadgeColors"))},null,8,na),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.items.badgeColor.enum,(t,n)=>((0,R.wg)(),(0,R.j4)(o,{key:`bc:${n}`,content:t},{default:(0,R.w5)(()=>[(0,R.wy)((0,R._)("input",{type:"color","onUpdate:modelValue":t=>e.settings[n]=t},null,8,la),[[A.nr,e.settings[n]]])]),_:2},1032,["content"]))),128)),(0,R.wy)((0,R._)("button",{textContent:(0,E.zw)(e.i18n("buttonReset")),class:"ml-1",onClick:t[0]||(t[0]=(...t)=>e.onResetBadgeColors&&e.onResetBadgeColors(...t))},null,8,oa),[[A.F8,e.isCustomBadgeColor]])])])]),(0,R._)("section",aa,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("optionUpdate"))},null,8,sa),(0,R._)("div",ia,[(0,R._)("label",null,[(0,R.Wm)(a,{"i18n-key":"labelAutoUpdate"},{default:(0,R.w5)(()=>[(0,R.wy)((0,R._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.settings.autoUpdate=t),type:"number",min:"0",max:"365",step:"1/"},null,512),[[A.nr,e.settings.autoUpdate]])]),_:1})]),(0,R.Wm)(l,{name:"updateEnabledScriptsOnly",label:e.i18n("labelEnabledScriptsOnly")},null,8,["label"])]),(0,R._)("div",ra,[(0,R.Wm)(l,{name:"notifyUpdates",label:e.i18n("labelNotifyUpdates")},null,8,["label"]),(0,R.Wm)(l,{name:"notifyUpdatesGlobal",label:e.i18n("labelNotifyUpdatesGlobal"),class:"ml-2"},null,8,["label"])])]),(0,R._)("section",ca,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("labelBackup"))},null,8,ua),(0,R.Wm)(s),(0,R.Wm)(i)]),(0,R.Wm)(r),((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)({showAdvanced:e.settings},(t,n)=>((0,R.wg)(),(0,R.iD)("details",{key:n,open:t[n]},[(0,R._)("summary",{onClick:(0,A.iM)(e=>t[n]=!t[n],["prevent"])},[((0,R.wg)(),(0,R.j4)((0,R.LL)(t[n]?"h1":"h3"),{textContent:(0,E.zw)(e.i18n("labelAdvanced")),class:"inline-block"},null,8,["textContent"]))],8,pa),(0,R._)("section",ma,[(0,R._)("h3",{textContent:(0,E.zw)(e.i18n("labelGeneral"))},null,8,ha),(0,R._)("div",null,[(0,R._)("label",null,[(0,R.Wm)(a,{"i18n-key":"optionUiTheme"},{default:(0,R.w5)(()=>[((0,R.wg)(),(0,R.iD)(R.HY,null,(0,R.Ko)(["uiTheme"],t=>(0,R.wy)((0,R._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.items[t].enum,(e,n)=>((0,R.wg)(),(0,R.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,E.zw)(e)},null,8,fa))),128))],8,ga),[[A.bM,e.settings[t]]])),64))]),_:1})])]),(0,R._)("div",va,[(0,R._)("label",null,[(0,R._)("span",{textContent:(0,E.zw)(e.i18n("labelInjectionMode"))},null,8,wa),((0,R.wg)(),(0,R.iD)(R.HY,null,(0,R.Ko)(["defaultInjectInto"],t=>(0,R.wy)((0,R._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.items[t].enum,(e,n)=>((0,R.wg)(),(0,R.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,E.zw)(n)},null,8,ya))),128))],8,ba),[[A.bM,e.settings[t]]])),64)),(0,R._)("a",{class:"ml-1",href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("learnInjectionMode"))},null,8,xa)]),(0,R._)("label",null,[(0,R.Wm)(l,{name:"xhrInject"}),(0,R.Wm)(o,{content:e.i18n("labelXhrInjectHint")},{default:(0,R.w5)(()=>[(0,R.Wm)(a,{"i18n-key":"labelXhrInject"},{default:(0,R.w5)(()=>[Ca]),_:1})]),_:1},8,["content"])]),e.settings.xhrInject?(0,R.kq)("",!0):((0,R.wg)(),(0,R.iD)("label",ka,[(0,R.Wm)(l,{name:"ffInject"}),(0,R.Wm)(o,{content:e.i18n("labelFastFirefoxInjectHint")},{default:(0,R.w5)(()=>[(0,R.Wm)(a,{"i18n-key":"labelFastFirefoxInject"},{default:(0,R.w5)(()=>[_a]),_:1})]),_:1},8,["content"])]))]),(0,R._)("div",null,[(0,R.Wm)(a,{"i18n-key":"labelExposeStatus",class:"mr-1c"},{default:(0,R.w5)(()=>[((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(e.expose,([e,t])=>((0,R.wg)(),(0,R.j4)(l,{key:t,name:`expose.${e}`,class:"mr-1c valign-tb"},{default:(0,R.w5)(()=>[(0,R._)("span",{textContent:(0,E.zw)(t)},null,8,Sa),(0,R._)("a",{href:`https://${t}`,target:"_blank",rel:"noopener noreferrer"},"\u2197",8,za)]),_:2},1032,["name"]))),128))]),_:2},1024)])]),(0,R.Wm)(c),(0,R.Wm)(u),(0,R.Wm)(d),(0,R.Wm)(p)],8,da))),128))],8,Po)}]]),zi={class:"tab-about mb-2c"},Di={class:"mt-0 mr-1c"},Ui=["textContent"],$i=["textContent"],Ri=["textContent"],Ei=["textContent"],Vi=["textContent"],Ii=["textContent"],ji=["textContent"],Wi=["textContent"],Ti=["textContent"],Li=["textContent"],Oi=["textContent"],Mi={data:()=>({name:y.name,version:"2.14.0",language:browser.i18n.getUILanguage()}),activated(){(0,z.wO)(this.$el)}},Ai=(0,zt.Z)(Mi,[["render",(e,t,n,l,o,a)=>((0,R.wg)(),(0,R.iD)("div",zi,[(0,R._)("h1",Di,[(0,R._)("span",{textContent:(0,E.zw)(o.name)},null,8,Ui),(0,R._)("small",{textContent:(0,E.zw)(`v${o.version}`)},null,8,$i)]),(0,R._)("p",{textContent:(0,E.zw)(e.i18n("extDescription"))},null,8,Ri),(0,R._)("div",null,[(0,R._)("label",{textContent:(0,E.zw)(e.i18n("labelRelated"))},null,8,Ei),(0,R._)("ul",null,[(0,R._)("li",null,[(0,R._)("a",{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("labelHomepage"))},null,8,Vi)]),(0,R._)("li",null,[(0,R._)("a",{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("labelFeedback"))},null,8,Ii)]),(0,R._)("li",null,[(0,R._)("a",{href:"https://github.com/violentmonkey/violentmonkey/graphs/contributors",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("labelContributors"))},null,8,ji)]),(0,R._)("li",null,[(0,R._)("a",{href:"https://violentmonkey.github.io/privacy/",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("labelPrivacyPolicy"))},null,8,Wi)])])]),(0,R._)("div",null,[(0,R._)("label",{textContent:(0,E.zw)(e.i18n("labelCurrentLang"))},null,8,Ti),(0,R._)("span",{class:"current",textContent:(0,E.zw)(o.language)},null,8,Li),(0,R.Uk)(" | "),(0,R._)("a",{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer",textContent:(0,E.zw)(e.i18n("labelHelpTranslate"))},null,8,Oi)])]))]]),Zi="scripts",Pi="about",Hi="recycleBin",Ni=[{name:Zi,comp:Zo,label:(0,C.ag)("sideMenuInstalled")},{name:"settings",comp:Si,label:(0,C.ag)("sideMenuSettings")},{name:Pi,comp:Ai,label:(0,C.ag)("sideMenuAbout")},{name:Hi,comp:Zo,label:(0,C.ag)("buttonRecycleBin")}],Bi=(0,C.ag)("extName"),Fi="!editScript",[qi,Yi]=$.route.paths,Ki=(0,R.Fl)(()=>{const e=$.route.paths[0];return Ni.find(t=>t.name===e)||Ni[0]}),Ji=(0,R.Fl)(()=>({[Zi]:$.scripts.length,[Hi]:$.removedScripts.length}));function Gi(){const e=Ki.value.name===Zi,{paths:t}=$.route;M.$J.setContext("editScript",e&&t[1]),M.$J.setContext("tabScripts",e&&!t[1]),M.$J.setContext("showRecycle",Ki.value.name===Hi)}function Qi(e){const n=Ni.indexOf(Ki.value),l=Ni[(n+e+Ni.length)%Ni.length];t.location.hash=(null==l?void 0:l.name)||""}document.addEventListener("dragover",e=>{var n;["",Pi,Zi].includes($.route.hash)&&/^application\/(zip|x-zip-compressed)$/.test(null==(n=e.dataTransfer.items[0])?void 0:n.type)&&(t.location.hash="#settings")});const Xi={setup(){const e=(0,D.iH)(qi!==Zi||"_new"!==Yi&&!Number(Yi));return(0,R.m0)(()=>{const{title:e}=$;document.title=e?`${e} - ${Bi}`:Bi}),(0,R.YP)(()=>$.route.paths,()=>{e.value=!0,Gi()}),(0,R.bv)(()=>{const e=[M.$J.register("a-pageup",()=>Qi(-1),{condition:Fi}),M.$J.register("a-pagedown",()=>Qi(1),{condition:Fi})];return M.$J.enable(),Gi(),()=>{e.forEach(e=>{e()}),M.$J.disable()}}),{tabs:Ni,current:Ki,numbers:Ji,canRenderAside:e}}},er=(0,zt.Z)(Xi,[["render",(e,t,n,l,o,a)=>((0,R.wg)(),(0,R.iD)("div",V,[l.canRenderAside?((0,R.wg)(),(0,R.iD)("aside",I,[(0,R._)("div",j,[W,(0,R._)("h1",{class:"hidden-sm",textContent:(0,E.zw)(e.i18n("extName"))},null,8,T),L,((0,R.wg)(!0),(0,R.iD)(R.HY,null,(0,R.Ko)(l.tabs,e=>((0,R.wg)(),(0,R.iD)("div",{class:"aside-menu-item",key:e.name},[(0,R._)("a",{href:`#${e.name}`,class:(0,E.C_)({active:e===l.current}),"data-num-scripts":l.numbers[e.name],textContent:(0,E.zw)(e.label)},null,10,O)]))),128))])])):(0,R.kq)("",!0),((0,R.wg)(),(0,R.j4)(R.Ob,null,[((0,R.wg)(),(0,R.j4)((0,R.LL)(l.current.comp),{class:"tab"}))],1024))]))]]),tr=["scripts","sizes"],nr=[(0,C.ag)("editNavCode"),(0,C.ag)("editNavSettings"),(0,C.ag)("editNavValues"),"@require","@resource"];let lr;function or(e,t){const n=e.meta||{},l=(0,C.iQ)(n,"name"),o=v(C.Hv,[n.name,l,n.description,(0,C.iQ)(n,"description"),e.custom.name,e.custom.description],"\n"),a=e.custom.name||l,s=a.toLowerCase();let i=0,r="";t.forEach((e,t)=>{i+=e,e&&(r+=`${nr[t]}: ${(0,C.aj)(e)}\n`)}),e.$cache={search:o,name:a,lowerName:s,size:(0,C.aj)(i,!0).replace(" ",""),sizes:r.slice(0,-1).replace(/\x20/g,"\xa0").replace(/[^B]$/gm,"$&B"),sizeNum:i},(0,_.d)(e,$,!0)}function ar(){const e=+$.route.paths[1];return sr(e?[e]:null).catch(e&&(()=>sr()))}async function sr(e){const[t]=await p.all([(0,C.gj)("GetData",{ids:e,sizes:!0},{retry:!0}),S.Z.ready]),{scripts:n,sizes:l}=t,o=x(t,tr);d.assign($,o);const a=[],s=[];n.forEach((e,t)=>{or(e,l[t]),(e.config.removed?s:a).push(e)}),$.scripts=a,$.removedScripts=s,$.loading=!1}$.loading=!0,ar(),d.assign(k.Z,{ScriptsUpdated(){ar()},UpdateSync(e){$.sync=e},async UpdateScript({update:e,where:t}={}){var n;if(!e)return;(lr||(lr=$.importing)&&(lr=p.race([lr,(0,C.dL)(500)])))&&(await lr,lr=null);const[l]=await(0,C.gj)("GetSizes",[t.id]),o=$.scripts.findIndex(e=>e.props.id===t.id),a=$.removedScripts.findIndex(e=>e.props.id===t.id),s=d.assign($.scripts[o]||$.removedScripts[a]||{},e);if(s.error&&!e.error&&(s.error=null),or(s,l),null!=(null==(n=e.config)?void 0:n.removed)&&(e.config.removed?$.needRefresh=!0:$.removedScripts=$.removedScripts.filter(e=>e.props.id!==t.id)),(s.config.removed?a:o)<0){s.message="";const e=s.config.removed?"removedScripts":"scripts";$[e]=[...$[e],s]}},RemoveScripts(e){$.removedScripts=$.removedScripts.filter(t=>!e.includes(t.props.id))}}),(0,z.sY)(er)},6291:(e,t,n)=>{var l={"./arrow.svg":7864,"./author.svg":6263,"./code.svg":4237,"./cog.svg":8527,"./command.svg":6337,"./filter.svg":1691,"./home.svg":6447,"./info.svg":6396,"./more.svg":485,"./plus.svg":336,"./question.svg":934,"./refresh.svg":1727,"./search.svg":2574,"./toggle-off.svg":3882,"./toggle-on.svg":6276,"./trash.svg":2981,"./undo.svg":418};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(l,e)){var t=new u("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}o.keys=()=>d.keys(l),o.resolve=a,e.exports=o,o.id=6291},7462:(e,t,n)=>{"use strict";function l(){return l=d.assign?d.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)d.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},l.apply(this,arguments)}n.d(t,{Z:()=>l})}},k={};function _(e){var t=k[e];if(void 0!==t)return t.exports;var n=k[e]={exports:{}};return C[e].call(n.exports,n,n.exports,_),n.exports}_.m=C,i=[],_.O=(e,t,n,l)=>{if(!t){var o=1/0;for(c=0;c<i.length;c++){for(var[t,n,l]=i[c],a=!0,s=0;s<t.length;s++)(!1&l||o>=l)&&d.keys(_.O).every(e=>_.O[e](t[s]))?t.splice(s--,1):(a=!1,l<o&&(o=l));if(a){i.splice(c--,1);var r=n();void 0!==r&&(e=r)}}return e}l=l||0;for(var c=i.length;c>0&&i[c-1][2]>l;c--)i[c]=i[c-1];i[c]=[t,n,l]},_.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return _.d(t,{a:t}),t},x=d.getPrototypeOf?e=>d.getPrototypeOf(e):e=>e.__proto__,_.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=d.create(null);_.r(n);var l={};g=g||[null,x({}),x([]),x(x)];for(var o=2&t&&e;"object"==typeof o&&!~g.indexOf(o);o=x(o))d.getOwnPropertyNames(o).forEach(t=>l[t]=()=>e[t]);return l.default=()=>e,_.d(n,l),n},_.d=(e,t)=>{for(var n in t)_.o(t,n)&&!_.o(e,n)&&d.defineProperty(e,n,{enumerable:!0,get:t[n]})},_.o=(e,t)=>d.prototype.hasOwnProperty.call(e,t),_.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&d.defineProperty(e,Symbol.toStringTag,{value:"Module"}),d.defineProperty(e,"__esModule",{value:!0})},_.j=360,(()=>{var e={360:0};_.O.j=t=>0===e[t];var t=(t,n)=>{var l,o,[a,s,i]=n,r=0;if(a.some(t=>0!==e[t])){for(l in s)_.o(s,l)&&(_.m[l]=s[l]);if(i)var c=i(_)}for(t&&t(n);r<a.length;r++)o=a[r],_.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return _.O(c)},n=self.webpackChunkviolentmonkey=self.webpackChunkviolentmonkey||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var S=_.O(void 0,[386,84],()=>_(3263));S=_.O(S)})()}